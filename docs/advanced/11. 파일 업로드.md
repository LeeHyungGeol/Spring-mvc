# 11. íŒŒì¼ ì—…ë¡œë“œ<br/>## ëª©ì°¨- íŒŒì¼ ì—…ë¡œë“œ ì†Œê°œ- ì„œë¸”ë¦¿ê³¼ íŒŒì¼ ì—…ë¡œë“œ1- ì„œë¸”ë¦¿ê³¼ íŒŒì¼ ì—…ë¡œë“œ2- ìŠ¤í”„ë§ê³¼ íŒŒì¼ ì—…ë¡œë“œ<br/><br/><br/># ğŸ’¡íŒŒì¼ ì—…ë¡œë“œ ì†Œê°œì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” HTML Formì„ í†µí•œ íŒŒì¼ ì—…ë¡œë“œë¥¼ ì´í•´í•˜ë ¤ë©´ ë¨¼ì € í¼ì„ ì „ì†¡í•˜ëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ì‹ì˜ ì°¨ì´ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤.**HTML í¼ ì „ì†¡ ë°©ì‹**- `application/x-www-form-urlencoded`- `multipart/form-data`**application/x-www-form-urlencoded ë°©ì‹**![image](https://user-images.githubusercontent.com/83503188/212910824-ab4b5053-deac-4a64-9dc8-218c22bf2161.png)- Form íƒœê·¸ì— ë³„ë„ì˜ enctype ì˜µì…˜ì´ ì—†ìœ¼ë©´ ì›¹ ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ HTTP ë©”ì‹œì§€ì˜ í—¤ë”ì— ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•œë‹¤.    - `Content-Type: application/x-www-form-urlencoded`- í¼ì— ì…ë ¥í•œ ì „ì†¡í•  í•­ëª©ì„ HTTP Bodyì— ë¬¸ìë¡œ `username=kim&age=20` ì™€ ê°™ì´ `&` ë¡œ êµ¬ë¶„í•´ì„œ ì „ì†¡í•œë‹¤.íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ë ¤ë©´ íŒŒì¼ì€ ë¬¸ìê°€ ì•„ë‹ˆë¼ ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë¥¼ ì „ì†¡í•´ì•¼ í•œë‹¤. ë¬¸ìë¥¼ ì „ì†¡í•˜ëŠ” ì´ ë°©ì‹ìœ¼ë¡œ íŒŒì¼ì„ ì „ì†¡í•˜ê¸°ëŠ” ì–´ë µë‹¤.ê·¸ë¦¬ê³  ë˜ í•œê°€ì§€ ë¬¸ì œê°€ ë” ìˆëŠ”ë°, ë³´í†µ í¼ì„ ì „ì†¡í•  ë•Œ íŒŒì¼ë§Œ ì „ì†¡í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ëŠ” ì ì´ë‹¤.ë‹¤ìŒ ì˜ˆë¥¼ ë³´ì.```text- ì´ë¦„- ë‚˜ì´- ì²¨ë¶€íŒŒì¼```ë¬¸ìì™€ ë°”ì´ë„ˆë¦¬ë¥¼ ë™ì‹œì— ì „ì†¡í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ë‹¤.ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ HTTPëŠ” `multipart/form-data` ë¼ëŠ” ì „ì†¡ ë°©ì‹ì„ ì œê³µí•œë‹¤.**multipart/form-data ë°©ì‹**![image](https://user-images.githubusercontent.com/83503188/212911445-23d3db22-85ca-45ce-adb7-6bdaa02db31d.png)- ì´ ë°©ì‹ì„ ì‚¬ìš©í•˜ë ¤ë©´ Form íƒœê·¸ì— ë³„ë„ì˜ `enctype="multipart/form-data"` ë¥¼ ì§€ì •í•´ì•¼ í•œë‹¤.- `multipart/form-data` ë°©ì‹ì€ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ì—¬ëŸ¬ íŒŒì¼ê³¼ í¼ì˜ ë‚´ìš© í•¨ê»˜ ì „ì†¡í•  ìˆ˜ ìˆë‹¤.í¼ì˜ ì…ë ¥ ê²°ê³¼ë¡œ ìƒì„±ëœ HTTP ë©”ì‹œì§€ë¥¼ ë³´ë©´ ê°ê°ì˜ ì „ì†¡ í•­ëª©ì´ êµ¬ë¶„ì´ ë˜ì–´ìˆë‹¤. `Content-Disposition` ì´ë¼ëŠ” í•­ëª©ë³„ í—¤ë”ê°€ ì¶”ê°€ë˜ì–´ ìˆê³  ì—¬ê¸°ì— ë¶€ê°€ ì •ë³´ê°€ ìˆë‹¤.ì˜ˆì œì—ì„œëŠ” `username` , `age` , `file1` ì´ ê°ê° ë¶„ë¦¬ë˜ì–´ ìˆê³ , í¼ì˜ ì¼ë°˜ ë°ì´í„°ëŠ” ê° í•­ëª©ë³„ë¡œ ë¬¸ìê°€ ì „ì†¡ë˜ê³ , íŒŒì¼ì˜ ê²½ìš° íŒŒì¼ ì´ë¦„ê³¼ `Content-Type`ì´ ì¶”ê°€ë˜ê³  ë°”ì´ë„ˆë¦¬ ë°ì´í„°ê°€ ì „ì†¡ëœë‹¤.`multipart/form-data` ëŠ” ì´ë ‡ê²Œ ê°ê°ì˜ í•­ëª©ì„ êµ¬ë¶„í•´ì„œ, í•œë²ˆì— ì „ì†¡í•˜ëŠ” ê²ƒì´ë‹¤.**Part**`multipart/form-data` ëŠ” `application/x-www-form-urlencoded` ì™€ ë¹„êµí•´ì„œ ë§¤ìš° ë³µì¡í•˜ê³  ê°ê°ì˜ ë¶€ë¶„( `Part` )ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆë‹¤.ê·¸ë ‡ë‹¤ë©´ ì´ë ‡ê²Œ ë³µì¡í•œ HTTP ë©”ì‹œì§€ë¥¼ ì„œë²„ì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œ?<br/><br/><br/># ğŸ’¡ì„œë¸”ë¦¿ê³¼ íŒŒì¼ ì—…ë¡œë“œ1**ServletUploadControllerV1**```java@Slf4j@Controllerpublic class ServletUploadControllerV1 {    @GetMapping("/upload")    public String newFile() {        return "upload-form";    }    @PostMapping("/upload")    public String saveFileV1(HttpServletRequest request) throws ServletException, IOException {        log.info("request={}", request);        String itemName = request.getParameter("itemName");        log.info("itemName={}", itemName);        Collection<Part> parts = request.getParts();        log.info("parts={}", parts);        return "upload-form";    }    }````resources/templates/upload-form.html````html<!DOCTYPE HTML><html xmlns:th="http://www.thymeleaf.org"><head>    <meta charset="utf-8"></head><body><div class="container">    <div class="py-5 text-center">        <h2>ìƒí’ˆ ë“±ë¡ í¼</h2>    </div>    <h4 class="mb-3">ìƒí’ˆ ì…ë ¥</h4>    <form th:action method="post" enctype="multipart/form-data">        <ul>            <li>ìƒí’ˆëª… <input type="text" name="itemName"></li>            <li>íŒŒì¼<input type="file" name="file" ></li>        </ul>        <input type="submit"/>    </form></div> <!-- /container --></body></html>```**ê²°ê³¼**![image](https://user-images.githubusercontent.com/83503188/212917316-23fdd9a4-3d50-4052-9532-497772d52e15.png)![image](https://user-images.githubusercontent.com/83503188/212915866-cd28df97-2c70-42fc-be0b-5d62e121c4fa.png)<br/><br/>## **âš¡ï¸ë©€í‹°íŒŒíŠ¸ ì‚¬ìš© ì˜µì…˜****ì—…ë¡œë“œ ì‚¬ì´ì¦ˆ ì œí•œ**```propertiesspring.servlet.multipart.max-file-size=1MBspring.servlet.multipart.max-request-size=10MB```- í° íŒŒì¼ì„ ë¬´ì œí•œ ì—…ë¡œë“œí•˜ê²Œ ë‘˜ ìˆ˜ëŠ” ì—†ìœ¼ë¯€ë¡œ ì—…ë¡œë“œ ì‚¬ì´ì¦ˆë¥¼ ì œí•œí•  ìˆ˜ ìˆë‹¤.- ì‚¬ì´ì¦ˆë¥¼ ë„˜ìœ¼ë©´ ì˜ˆì™¸( `SizeLimitExceededException` )ê°€ ë°œìƒí•œë‹¤.- `max-file-size` : íŒŒì¼ í•˜ë‚˜ì˜ ìµœëŒ€ ì‚¬ì´ì¦ˆ, ê¸°ë³¸ 1MB- `max-request-size`: ë©€í‹°íŒŒíŠ¸ ìš”ì²­ í•˜ë‚˜ì— ì—¬ëŸ¬ íŒŒì¼ì„ ì—…ë¡œë“œ í•  ìˆ˜ ìˆëŠ”ë°, ê·¸ ì „ì²´ í•©ì´ë‹¤. ê¸°ë³¸ 10MB**spring.servlet.multipart.enabled ë„ê¸°**```propertiesspring.servlet.multipart.enabled=false```- `spring.servlet.multipart.enabled` ì˜µì…˜ì„ ë„ë©´ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” ë©€í‹°íŒŒíŠ¸ì™€ ê´€ë ¨ëœ ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•ŠëŠ”ë‹¤.> ì°¸ê³ >> `spring.servlet.multipart.enabled` ì˜µì…˜ì„ ì¼œë©´ ìŠ¤í”„ë§ì˜ `DispatcherServlet` ì—ì„œ ë©€í‹°íŒŒíŠ¸ ë¦¬ì¡¸ë²„( `MultipartResolver` )ë¥¼ ì‹¤í–‰í•œë‹¤.> ë©€í‹°íŒŒíŠ¸ ë¦¬ì¡¸ë²„ëŠ” ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì¸ ê²½ìš° ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì „ë‹¬í•˜ëŠ” ì¼ë°˜ì ì¸ `HttpServletRequest` ë¥¼ `MultipartHttpServletRequest` ë¡œ ë³€í™˜í•´ì„œ ë°˜í™˜í•œë‹¤.>> ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ê¸°ë³¸ ë©€í‹°íŒŒíŠ¸ ë¦¬ì¡¸ë²„ëŠ” `MultipartHttpServletRequest` ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ `StandardMultipartHttpServletRequest` ë¥¼ ë°˜í™˜í•œë‹¤.<br/><br/><br/># ğŸ’¡ì„œë¸”ë¦¿ê³¼ íŒŒì¼ ì—…ë¡œë“œ2ì„œë¸”ë¦¿ì´ ì œê³µí•˜ëŠ” `Part` ì— ëŒ€í•´ ì•Œì•„ë³´ê³  ì‹¤ì œ íŒŒì¼ë„ ì„œë²„ì— ì—…ë¡œë“œ í•´ë³´ì.ë¨¼ì € íŒŒì¼ì„ ì—…ë¡œë“œë¥¼ í•˜ë ¤ë©´ ì‹¤ì œ íŒŒì¼ì´ ì €ì¥ë˜ëŠ” ê²½ë¡œê°€ í•„ìš”í•˜ë‹¤.```propertiesfile.dir= C:/Users/dudwl/workspace/spring-study-by-myself/springMVC/springMVC2/upload/file/```**ServletUploadControllerV2**```java@Slf4j@Controller@RequestMapping("/servlet/v2")public class ServletUploadControllerV2 {    @Value("${file.dir}")    private String fileDir;    @GetMapping("/upload")    public String newFile() {        return "upload-form";    }    @PostMapping("/upload")    public String saveFileV1(HttpServletRequest request) throws            ServletException, IOException {        log.info("request={}", request);        String itemName = request.getParameter("itemName");        log.info("itemName={}", itemName);        Collection<Part> parts = request.getParts();        log.info("parts={}", parts);        for (Part part : parts) {            log.info("==== PART ====");            log.info("name={}", part.getName());            Collection<String> headerNames = part.getHeaderNames();            for (String headerName : headerNames) {                log.info("header {}: {}", headerName,                        part.getHeader(headerName));            }            //í¸ì˜ ë©”ì„œë“œ            //content-disposition; filename            log.info("submittedFileName={}", part.getSubmittedFileName());            log.info("size={}", part.getSize()); //part body size            //ë°ì´í„° ì½ê¸°            InputStream inputStream = part.getInputStream();            String body = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);            log.info("body={}", body);            //íŒŒì¼ì— ì €ì¥í•˜ê¸°            if (StringUtils.hasText(part.getSubmittedFileName())) {                String fullPath = fileDir + part.getSubmittedFileName();                log.info("íŒŒì¼ ì €ì¥ fullPath={}", fullPath);                part.write(fullPath);            }        }        return "upload-form";    }}```**Part ì£¼ìš” ë©”ì„œë“œ**- `part.getSubmittedFileName()` : í´ë¼ì´ì–¸íŠ¸ê°€ ì „ë‹¬í•œ íŒŒì¼ëª…- `part.getInputStream()`: Partì˜ ì „ì†¡ ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìˆë‹¤.- `part.write(...)`: Partë¥¼ í†µí•´ ì „ì†¡ëœ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.**ê²°ê³¼**![image](https://user-images.githubusercontent.com/83503188/212920743-40e3d0bc-0170-425f-924e-ce3ac892ad8d.png)<br/><br/><br/># ğŸ’¡ìŠ¤í”„ë§ê³¼ íŒŒì¼ ì—…ë¡œë“œ`ìŠ¤í”„ë§ì€ MultipartFile ì´ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¡œ ë©€í‹°íŒŒíŠ¸ íŒŒì¼ì„ ë§¤ìš° í¸ë¦¬í•˜ê²Œ ì§€ì›í•œë‹¤.`**SpringUploadController**```java@Slf4j@Controller@RequestMapping("/spring")public class SpringUploadController {    @Value("${file.dir}")    private String fileDir;    @GetMapping("/upload")    public String newFile() {        return "upload-form";    }    @PostMapping("/upload")    public String saveFile(@RequestParam String itemName, @RequestParam MultipartFile file, HttpServletRequest request) throws IOException {        log.info("request={}", request);        log.info("itemName={}", itemName);        log.info("multipartFile={}", file);        if (!file.isEmpty()) {            String fullPath = fileDir + file.getOriginalFilename();            log.info("íŒŒì¼ ì €ì¥ fullPath={}", fullPath);            file.transferTo(new File(fullPath));        }        return "upload-form";    }}```- `@RequestParam MultipartFile file`    - ì—…ë¡œë“œí•˜ëŠ” HTML Formì˜ nameì— ë§ì¶”ì–´ `@RequestParam` ì„ ì ìš©í•˜ë©´ ëœë‹¤.    - `@ModelAttribute` ì—ì„œë„ `MultipartFile` ì„ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.**MultipartFile ì£¼ìš” ë©”ì„œë“œ**- `file.getOriginalFilename()` : ì—…ë¡œë“œ íŒŒì¼ ëª…- `file.transferTo(...)` : íŒŒì¼ ì €ì¥**ê²°ê³¼**![image](https://user-images.githubusercontent.com/83503188/212921862-3271780f-6e69-4739-89cc-545da3cc29d4.png)<br/><br/><br/># ğŸ’¡ì˜ˆì œë¡œ êµ¬í˜„í•˜ëŠ” íŒŒì¼ ì—…ë¡œë“œ, ë‹¤ìš´ë¡œë“œ**ìš”êµ¬ì‚¬í•­**- ìƒí’ˆì„ ê´€ë¦¬    - ìƒí’ˆ ì´ë¦„    - ì²¨ë¶€íŒŒì¼ í•˜ë‚˜    - ì´ë¯¸ì§€ íŒŒì¼ ì—¬ëŸ¬ê°œ- ì²¨ë¶€íŒŒì¼ì„ ì—…ë¡œë“œ ë‹¤ìš´ë¡œë“œ í•  ìˆ˜ ìˆë‹¤.- ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ë¥¼ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.**Item - ìƒí’ˆ ë„ë©”ì¸**```java@Datapublic class Item {    private Long id;    private String itemName;    private UploadFile attachFile; // ì²¨ë¶€íŒŒì¼    private List<UploadFile> imageFiles; // ì´ë¯¸ì§€ íŒŒì¼ ì—¬ëŸ¬ê°œ }```**ItemRepository - ìƒí’ˆ ë¦¬í¬ì§€í† ë¦¬**```java@Repositorypublic class ItemRepository {    private final Map<Long, Item> store = new HashMap<>();    private long sequence = 0L;    public Item save(Item item) {        item.setId(++sequence);        store.put(item.getId(), item);        return item;    }    public Item findById(Long id) {        return store.get(id);    }}```**UploadFile - ì—…ë¡œë“œ íŒŒì¼ ì •ë³´ ë³´ê´€**```java@Datapublic class UploadFile {    private String uploadFileName;    private String storeFileName;    public UploadFile(String uploadFileName, String storeFileName) {        this.uploadFileName = uploadFileName;        this.storeFileName = storeFileName;    }}```- `uploadFileName` : ê³ ê°ì´ ì—…ë¡œë“œí•œ íŒŒì¼ëª…- `storeFileName` : ì„œë²„ ë‚´ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” íŒŒì¼ëª…ê³ ê°ì´ ì—…ë¡œë“œí•œ íŒŒì¼ëª…ìœ¼ë¡œ ì„œë²„ ë‚´ë¶€ì— íŒŒì¼ì„ ì €ì¥í•˜ë©´ ì•ˆëœë‹¤. ì™œëƒí•˜ë©´ ì„œë¡œ ë‹¤ë¥¸ ê³ ê°ì´ ê°™ì€ íŒŒì¼ì´ë¦„ì„ ì—…ë¡œë“œ í•˜ëŠ” ê²½ìš° ê¸°ì¡´ íŒŒì¼ ì´ë¦„ê³¼ ì¶©ëŒì´ ë‚  ìˆ˜ ìˆë‹¤.ì„œë²„ì—ì„œëŠ” ì €ì¥í•  íŒŒì¼ëª…ì´ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ë‚´ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ë³„ë„ì˜ íŒŒì¼ëª…ì´ í•„ìš”í•˜ë‹¤.**FileStore - íŒŒì¼ ì €ì¥ê³¼ ê´€ë ¨ëœ ì—…ë¬´ ì²˜ë¦¬**```java@Componentpublic class FileStore {    @Value("${file.dir}")    private String fileDir;    public String getFullPath(String filename) {        return fileDir + filename;    }    public List<UploadFile> storeFiles(List<MultipartFile> multipartFiles) throws IOException {        List<UploadFile> storeFileResult = new ArrayList<>();        for (MultipartFile multipartFile : multipartFiles) {            if (!multipartFile.isEmpty()) {                storeFileResult.add(storeFile(multipartFile));            }        }        return storeFileResult;    }    public UploadFile storeFile(MultipartFile multipartFile) throws IOException {        if (multipartFile.isEmpty()) return null;        String originalFilename = multipartFile.getOriginalFilename();        String storeFileName = createStoreFileName(originalFilename);        multipartFile.transferTo(new File(getFullPath(storeFileName)));        return new UploadFile(originalFilename, storeFileName);    }    private String createStoreFileName(String originalFilename) {        String ext = extractExt(originalFilename);        String uuid = UUID.randomUUID().toString();        return uuid + "." + ext;    }    private String extractExt(String originalFilename) {        int pos = originalFilename.lastIndexOf(".");        return originalFilename.substring(pos + 1);    }}```**ItemForm**```java@Datapublic class ItemForm {    private Long itemId;    private String itemName;    private List<MultipartFile> imageFiles;    private MultipartFile attachFile;}```- `List<MultipartFile> imageFiles` : ì´ë¯¸ì§€ë¥¼ ë‹¤ì¤‘ ì—…ë¡œë“œ í•˜ê¸° ìœ„í•´ `MultipartFile` ë¥¼ ì‚¬ìš©í–ˆë‹¤.- `MultipartFile attachFile` : ë©€í‹°íŒŒíŠ¸ëŠ” `@ModelAttribute` ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.**ItemController**```java@Slf4j@Controller@RequiredArgsConstructorpublic class ItemController {    private final ItemRepository itemRepository;    private final FileStore fileStore;    @GetMapping("/items/new")    public String newItem(@ModelAttribute ItemForm form) {        return "item-form";    }    @PostMapping("/items/new")    public String saveItem(@ModelAttribute ItemForm form, RedirectAttributes redirectAttributes) throws IOException {        UploadFile attachFile = fileStore.storeFile(form.getAttachFile());        List<UploadFile> storeImageFiles = fileStore.storeFiles(form.getImageFiles());        Item item = new Item();        item.setItemName(form.getItemName());        item.setAttachFile(attachFile);        item.setImageFiles(storeImageFiles);        itemRepository.save(item);        redirectAttributes.addAttribute("itemId", item.getId());        return "redirect:/items/{itemId}";    }    @GetMapping("/items/{id}")    public String items(@PathVariable Long id, Model model) {        Item item = itemRepository.findById(id);        model.addAttribute("item", item);        return "item-view";    }    @ResponseBody    @GetMapping("/images/{filename}")    public Resource downloadImage(@PathVariable String filename) throws MalformedURLException {        return new UrlResource("file:" + fileStore.getFullPath(filename));    }    @GetMapping("/attach/{itemId}")    public ResponseEntity<Resource> downloadAttach(@PathVariable Long itemId) throws MalformedURLException {        Item item = itemRepository.findById(itemId);        String storeFileName = item.getAttachFile().getStoreFileName();        String uploadFileName = item.getAttachFile().getUploadFileName();        UrlResource resource = new UrlResource("file:" + fileStore.getFullPath(storeFileName));        String encodedUploadFileName = UriUtils.encode(uploadFileName, StandardCharsets.UTF_8);         String contentDisposition = "attachment; filename=\"" + encodedUploadFileName + "\"";        return ResponseEntity.ok()                .header(HttpHeaders.CONTENT_DISPOSITION, contentDisposition)                .body(resource);    }}```- `@GetMapping("/items/new")` : ë“±ë¡ í¼ì„ ë³´ì—¬ì¤€ë‹¤.- `@PostMapping("/items/new")` : í¼ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ë³´ì—¬ì£¼ëŠ” í™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ í•œë‹¤.- `@GetMapping("/items/{id}")` : ìƒí’ˆì„ ë³´ì—¬ì¤€ë‹¤.- `@GetMapping("/images/{filename}")` : <img> íƒœê·¸ë¡œ ì´ë¯¸ì§€ë¥¼ ì¡°íšŒí•  ë•Œ ì‚¬ìš©í•œë‹¤. `UrlResource` ë¡œ ì´ë¯¸ì§€ íŒŒì¼ì„ ì½ì–´ì„œ `@ResponseBody` ë¡œ ì´ë¯¸ì§€ ë°”ì´ë„ˆë¦¬ë¥¼ ë°˜í™˜í•œë‹¤. -> `file:`ì„ í†µí•´ ë‚´ë¶€ íŒŒì¼ì— ì§ì ‘ ì ‘ê·¼- `@GetMapping("/attach/{itemId}")` : íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ í•  ë•Œ ì‹¤í–‰í•œë‹¤. ì˜ˆì œë¥¼ ë” ë‹¨ìˆœí™” í•  ìˆ˜ ìˆì§€ë§Œ, íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì‹œ ê¶Œí•œ ì²´í¬ê°™ì€ ë³µì¡í•œ ìƒí™©ê¹Œì§€ ê°€ì •í•œë‹¤ ìƒê°í•˜ê³  ì´ë¯¸ì§€ id ë¥¼ ìš”ì²­í•˜ë„ë¡ í–ˆë‹¤. -> ì´ë¯¸ì§€ Idë¥¼ í†µí•´ ìœ ì € ê¶Œí•œ ê²€ì¦, ...  íŒŒì¼ ë‹¤ìš´ë¡œë“œì‹œì—ëŠ” ê³ ê°ì´ ì—…ë¡œë“œí•œ íŒŒì¼ ì´ë¦„ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ í•˜ëŠ”ê²Œ ì¢‹ë‹¤. ì´ë•ŒëŠ” `Content-Disposition` í•´ë”ì— í‘œì¤€ ê·œì•½(`attachment; filename="ì—…ë¡œë“œ íŒŒì¼ëª…"`) ê°’ì„ ì£¼ë©´ ëœë‹¤. ->- `UriUtils.encode(uploadFileName, StandardCharsets.UTF_8);`: í•œê¸€ì´ ê¹¨ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì¸ì½”ë”©ë³´í†µ íŒŒì¼ì€ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ìŠ¤í† ë¦¬ì§€(AWS S3, ..)ì— ì €ì¥í•˜ê³ , ë°ì´í„°ë² ì´ìŠ¤ì—ëŠ” íŒŒì¼ì´ ì €ì¥ëœ ê²½ë¡œ ì •ë„ ì €ì¥í•œë‹¤.ê²½ë¡œë„ ë³´í†µ FullPathê°€ ì•„ë‹Œ Pathì˜ í˜•ì‹ì„ ë§ì¶°ë‘ê³  í˜•ì‹ ì´í›„ ìƒëŒ€ì ì¸ ê²½ë¡œë§Œ ì €ì¥í•œë‹¤.