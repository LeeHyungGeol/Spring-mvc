# 9. API ì˜ˆì™¸ ì²˜ë¦¬<br/>## ëª©ì°¨- API ì˜ˆì™¸ ì²˜ë¦¬- ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë³¸ ì˜¤ë¥˜ ì²˜ë¦¬ - `BasicErrorController`- API ì˜ˆì™¸ ì²˜ë¦¬ - `HandlerExceptionResolver`- API ì˜ˆì™¸ ì²˜ë¦¬ - CustomizeHandlerExceptionResolver- ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ExceptionResolver - `ResponseStatusExceptionResolver`- ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ExceptionResolver - `DefaultHandlerExceptionResolver`- ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ExceptionResolver - `@ExceptionResolver`, `ExceptionHandlerExceptionResolver`<br/><br/><br/># ğŸ’¡API ì˜ˆì™¸ ì²˜ë¦¬HTML í˜ì´ì§€ì˜ ê²½ìš° ì§€ê¸ˆê¹Œì§€ ì„¤ëª…í–ˆë˜ ê²ƒ ì²˜ëŸ¼ 4xx, 5xxì™€ ê°™ì€ ì˜¤ë¥˜ í˜ì´ì§€ë§Œ ìˆìœ¼ë©´ ëŒ€ë¶€ë¶„ì˜ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.ê·¸ëŸ°ë° APIì˜ ê²½ìš°ì—ëŠ” ìƒê°í•  ë‚´ìš©ì´ ë” ë§ë‹¤.ì˜¤ë¥˜ í˜ì´ì§€ëŠ” ë‹¨ìˆœíˆ ê³ ê°ì—ê²Œ ì˜¤ë¥˜ í™”ë©´ì„ ë³´ì—¬ì£¼ê³  ëì´ì§€ë§Œ,  **APIëŠ” ê° ì˜¤ë¥˜ ìƒí™©ì— ë§ëŠ” ì˜¤ë¥˜ ì‘ë‹µ ìŠ¤í™ì„ ì •í•˜ê³ , JSONìœ¼ë¡œ ë°ì´í„°ë¥¼ ë‚´ë ¤ì£¼ì–´ì•¼ í•œë‹¤.**  ì–´ë–»ê²Œ ìŠ¤í™ì„ ì •í• ì§€ëŠ” ì„œë¡œê°€ ì •í•˜ëŠ” ê²ƒì´ë‹¤.APIë„ ì˜¤ë¥˜ í˜ì´ì§€ì—ì„œ ì„¤ëª…í–ˆë˜ ê²ƒ ì²˜ëŸ¼ ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ì„œ ì„œë¸”ë¦¿ ì˜¤ë¥˜ í˜ì´ì§€ ë°©ì‹ì„ ì‚¬ìš©í•´ë³´ì.**WebServerCustomizer ë‹¤ì‹œ ë™ì‘**```java@Componentpublic class WebServerCustomizer implements WebServerFactoryCustomizer<ConfigurableWebServerFactory> {    @Override    public void customize(ConfigurableWebServerFactory factory) {        ErrorPage errorPage404 = new ErrorPage(HttpStatus.NOT_FOUND, "/error-page/404");        ErrorPage errorPage500 = new ErrorPage(HttpStatus.INTERNAL_SERVER_ERROR, "/error-page/504");        ErrorPage errorPageEx = new ErrorPage(RuntimeException.class, "/error-page/500");        factory.addErrorPages(errorPage404, errorPage500, errorPageEx);    }}````WebServerCustomizer` ê°€ ë‹¤ì‹œ ì‚¬ìš©ë˜ë„ë¡ í•˜ê¸° ìœ„í•´ `@Component` ì• ë…¸í…Œì´ì…˜ì— ìˆëŠ” ì£¼ì„ì„ í’€ìì´ì œ WASì— ì˜ˆì™¸ê°€ ì „ë‹¬ë˜ê±°ë‚˜, `response.sendError()` ê°€ í˜¸ì¶œë˜ë©´ ìœ„ì— ë“±ë¡í•œ ì˜ˆì™¸ í˜ì´ì§€ ê²½ë¡œê°€ í˜¸ì¶œëœë‹¤.**ApiExceptionController - API ì˜ˆì™¸ ì»¨íŠ¸ë¡¤ëŸ¬**```java@Slf4j@RestControllerpublic class ApiExceptionController {    @GetMapping("/api/members/{id}")    public MemberDto getMember(@PathVariable("id") String id) {        if (id.equals("ex")) {            throw new RuntimeException("ì˜ëª»ëœ ì‚¬ìš©ì");        }        return new MemberDto(id, "hello " + id);    }    @Data    @AllArgsConstructor    static class MemberDto {        private String memberId;        private String name;    }}```**ì •ìƒ í˜¸ì¶œ**`http://localhost:8080/api/members/spring`![image](https://user-images.githubusercontent.com/83503188/211294303-bc54d5bc-2a8a-4e10-962f-781a01fe2a45.png)**ì •ìƒ í˜¸ì¶œ**`http://localhost:8080/api/members/ex`![image](https://user-images.githubusercontent.com/83503188/211294394-a21e187d-6c62-4e9a-859e-83776072037e.png)APIë¥¼ ìš”ì²­í–ˆëŠ”ë°, ì •ìƒì˜ ê²½ìš° APIë¡œ JSON í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ê°€ ì •ìƒ ë°˜í™˜ëœë‹¤.ê·¸ëŸ°ë° ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ìš°ë¦¬ê°€ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘” ì˜¤ë¥˜ í˜ì´ì§€ HTMLì´ ë°˜í™˜ëœë‹¤. ì´ê²ƒì€ ê¸°ëŒ€í•˜ëŠ” ë°”ê°€ ì•„ë‹ˆë‹¤.í´ë¼ì´ì–¸íŠ¸ëŠ” ì •ìƒ ìš”ì²­ì´ë“ , ì˜¤ë¥˜ ìš”ì²­ì´ë“  JSONì´ ë°˜í™˜ë˜ê¸°ë¥¼ ê¸°ëŒ€í•œë‹¤.ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ì˜¤ë¥˜ í˜ì´ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ë„ JSON ì‘ë‹µì„ í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•´ì•¼ í•œë‹¤.## âš¡ï¸ì˜¤ë¥˜ í˜ì´ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ë„ JSON ì‘ë‹µ ì¶”ê°€**ErrorPageController - API ì‘ë‹µ ì¶”ê°€**```java@GetMapping(value = "/error-page/500", produces = MediaType.APPLICATION_JSON_VALUE)public ResponseEntity<Map<String, Object>> errorPage500Api(HttpServletRequest request, HttpServletResponse response) {    log.info("API errorPage 500");    Map<String, Object> result = new HashMap<>();    Exception ex = (Exception) request.getAttribute(ERROR_EXCEPTION);    result.put("status", request.getAttribute(ERROR_STATUS_CODE));    result.put("message", ex.getMessage());    Integer statusCode = (Integer) request.getAttribute(RequestDispatcher.ERROR_STATUS_CODE);    return new ResponseEntity<>(result, HttpStatus.valueOf(statusCode));}```- `produces = MediaType.APPLICATION_JSON_VALUE`    - í˜„ì¬ ë™ì¼í•œ URLì´ ì¡´ì¬í•˜ì§€ë§Œ `produce`ë¥¼ í†µí•´ íƒ€ì…ì„ ëª…ì‹œí•˜ë©´ ìš”ì²­ ë©”ì‹œì§€ `Accept` Headerì˜ ê°’ì´ í•´ë‹¹ íƒ€ì…ì¼ ê²½ìš° í˜¸ì¶œëœë‹¤.    - í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•˜ëŠ” HTTP Headerì˜ `Accept` ì˜ ê°’ì´ `application/json` ì¼ ë•Œ í•´ë‹¹ ë©”ì„œë“œê°€ í˜¸ì¶œëœë‹¤ëŠ” ê²ƒì´ë‹¤. ê²°êµ­ í´ë¼ì–´ì¸íŠ¸ê°€ ë°›ê³  ì‹¶ì€ ë¯¸ë””ì–´íƒ€ì…ì´ jsonì´ë©´ ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë©”ì„œë“œê°€ í˜¸ì¶œëœë‹¤.ì‘ë‹µ ë°ì´í„°ë¥¼ ìœ„í•´ì„œ `Map` ì„ ë§Œë“¤ê³  `status` , `message` í‚¤ì— ê°’ì„ í• ë‹¹í–ˆë‹¤.Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” `Map` ì„ JSON êµ¬ì¡°ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.`ResponseEntity` ë¥¼ ì‚¬ìš©í•´ì„œ ì‘ë‹µí•˜ê¸° ë•Œë¬¸ì— ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ ë™ì‘í•˜ë©´ì„œ í´ë¼ì´ì–¸íŠ¸ì— JSONì´ ë°˜í™˜ëœë‹¤.**ê²°ê³¼**![image](https://user-images.githubusercontent.com/83503188/211295945-e684e5ba-5043-4d30-b6e9-d51917f20887.png)<br/><br/><br/># ğŸ’¡ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë³¸ ì˜¤ë¥˜ ì²˜ë¦¬ - `BasicErrorController`API ì˜ˆì™¸ ì²˜ë¦¬ë„ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì œê³µí•˜ëŠ” ê¸°ë³¸ ì˜¤ë¥˜ ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì œê³µí•˜ëŠ” `BasicErrorController` ì½”ë“œë¥¼ ë³´ì.**BasicErrorController ì½”ë“œ**```java@Controller@RequestMapping("${server.error.path:${error.path:/error}}")public class BasicErrorController extends AbstractErrorController {  ...  @RequestMapping(produces = MediaType.TEXT_HTML_VALUE)  public ModelAndView errorHtml(HttpServletRequest request, HttpServletResponse response) {    ...  }  @RequestMapping  public ResponseEntity<Map<String, Object>> error(HttpServletRequest request) {    ...  }  ...}```- `/error` ë™ì¼í•œ ê²½ë¡œë¥¼ ì²˜ë¦¬í•˜ëŠ” `errorHtml()` , `error()` ë‘ ë©”ì„œë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.- `errorHtml()` : `produces = MediaType.TEXT_HTML_VALUE` : í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì˜ `Accept` í•´ë” ê°’ì´ `text/html` ì¸ ê²½ìš°ì—ëŠ” `errorHtml()` ì„ í˜¸ì¶œí•´ì„œ viewë¥¼ ì œê³µí•œë‹¤.- `error()` : ê·¸ì™¸ ê²½ìš°ì— í˜¸ì¶œë˜ê³  `ResponseEntity` ë¡œ HTTP Bodyì— JSON ë°ì´í„°ë¥¼ ë°˜í™˜í•œë‹¤.## âš¡ï¸ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ì˜ˆì™¸ ì²˜ë¦¬ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ê¸°ë³¸ ì„¤ì •ì€ ì˜¤ë¥˜ ë°œìƒì‹œ `/error`ë¥¼ ì˜¤ë¥˜ í˜ì´ì§€ë¡œ ìš”ì²­í•œë‹¤.`BasicErrorController`ëŠ” ì´ ê²½ë¡œë¥¼ ê¸°ë³¸ìœ¼ë¡œ ë°›ëŠ”ë‹¤.**Postmanìœ¼ë¡œ ì‹¤í–‰**`GET http://localhost:8080/api/members/ex`![image](https://user-images.githubusercontent.com/83503188/211299605-2cfaa2cb-7045-4cfc-98c7-a690db29dda9.png)ë‹¤ìŒ ì˜µì…˜ë“¤ì„ ì„¤ì •í•˜ë©´ ë” ìì„¸í•œ ì˜¤ë¥˜ ì •ë³´ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.- server.error.include-binding-errors=always- server.error.include-exception=true- server.error.include-message=always- server.error.include-stacktrace=always![image](https://user-images.githubusercontent.com/83503188/211299870-96f1dc99-f1a0-4ddf-9a7b-54db0cfd67ad.png)![image](https://user-images.githubusercontent.com/83503188/211299949-0d3be683-c57e-4b28-a93c-9d931434b3c9.png)## âš¡ï¸HTML í˜ì´ì§€ vs. API ì˜¤ë¥˜`BasicErrorController` ë¥¼ í™•ì¥í•˜ë©´ JSON ë©”ì‹œì§€ë„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.ê·¸ëŸ°ë° API ì˜¤ë¥˜ëŠ” ì¡°ê¸ˆ ë’¤ì— ì„¤ëª…í•  `@ExceptionHandler` ê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ë‚˜ì€ ë°©ë²•ì´ë¯€ë¡œ ì§€ê¸ˆì€ `BasicErrorController` ë¥¼ í™•ì¥í•´ì„œ JSON ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ ì •ë„ë¡œë§Œ ì´í•´í•´ë‘ì.ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì œê³µí•˜ëŠ” `BasicErrorController` ëŠ” HTML í˜ì´ì§€ë¥¼ ì œê³µí•˜ëŠ” ê²½ìš°ì—ëŠ” ë§¤ìš° í¸ë¦¬í•˜ë‹¤. 4xx, 5xx ë“±ë“± ëª¨ë‘ ì˜ ì²˜ë¦¬í•´ì¤€ë‹¤. ê·¸ëŸ°ë° API ì˜¤ë¥˜ ì²˜ë¦¬ëŠ” ë‹¤ë¥¸ ì°¨ì›ì˜ ì´ì•¼ê¸°ì´ë‹¤. API ë§ˆë‹¤, ê°ê°ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë‚˜ ì˜ˆì™¸ë§ˆë‹¤ ì„œë¡œ ë‹¤ë¥¸ ì‘ë‹µ ê²°ê³¼ë¥¼ ì¶œë ¥í•´ì•¼ í•  ìˆ˜ë„ ìˆë‹¤.   ì˜ˆë¥¼ ë“¤ì–´ì„œ íšŒì›ê³¼ ê´€ë ¨ëœ APIì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•  ë•Œ ì‘ë‹µê³¼, ìƒí’ˆê³¼ ê´€ë ¨ëœ APIì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ì— ë”°ë¼ ê·¸ ê²°ê³¼ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤.> **ê²°ê³¼ì ìœ¼ë¡œ ë§¤ìš° ì„¸ë°€í•˜ê³  ë³µì¡í•˜ë‹¤. ë”°ë¼ì„œ ì´ ë°©ë²•ì€ HTML í™”ë©´ì„ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©í•˜ê³ , API ì˜¤ë¥˜ ì²˜ë¦¬ëŠ” ë’¤ì—ì„œ ì„¤ëª…í•  `@ExceptionHandler` ë¥¼ ì‚¬ìš©í•˜ì.**<br/><br/><br/># ğŸ’¡API ì˜ˆì™¸ ì²˜ë¦¬ - `HandlerExceptionResolver`**ëª©í‘œ**ì˜ˆì™¸ê°€ ë°œìƒí•´ì„œ ì„œë¸”ë¦¿ì„ ë„˜ì–´ `WAS`ê¹Œì§€ ì˜ˆì™¸ê°€ ì „ë‹¬ë˜ë©´ HTTP ìƒíƒœì½”ë“œê°€ 500ìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤.ë°œìƒí•˜ëŠ” ì˜ˆì™¸ì— ë”°ë¼ì„œ 400, 404 ë“±ë“± ë‹¤ë¥¸ ìƒíƒœì½”ë“œë¡œ ì²˜ë¦¬í•˜ê³  ì‹¶ë‹¤.ì˜¤ë¥˜ ë©”ì‹œì§€, í˜•ì‹ë“±ì„ APIë§ˆë‹¤ ë‹¤ë¥´ê²Œ ì²˜ë¦¬í•˜ê³  ì‹¶ë‹¤.**ìƒíƒœì½”ë“œ ë³€í™˜**ì˜ˆë¥¼ ë“¤ì–´ì„œ `IllegalArgumentException` ì„ ì²˜ë¦¬í•˜ì§€ ëª»í•´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ ë°–ìœ¼ë¡œ ë„˜ì–´ê°€ëŠ” ì¼ì´ ë°œìƒí•˜ë©´ HTTP ìƒíƒœì½”ë“œë¥¼ 400ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ì‹¶ë‹¤.ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?**ApiExceptionController - ìˆ˜ì •**```java    @GetMapping("/api/members/{id}")    public MemberDto getMember(@PathVariable("id") String id) {                if (id.equals("ex")) {            throw new RuntimeException("ì˜ëª»ëœ ì‚¬ìš©ì");        }        if (id.equals("bad")) {            throw new IllegalArgumentException("ì˜ëª»ëœ ì…ë ¥ ê°’");        }        return new MemberDto(id, "hello " + id);    }```![image](https://user-images.githubusercontent.com/83503188/211301806-2db986c3-3f31-4966-9d10-51e6888e1394.png)- ì‹¤í–‰í•´ë³´ë©´ ìƒíƒœ ì½”ë“œê°€ 500ì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.## âš¡ï¸HandlerExceptionResolver ì ìš©ìŠ¤í”„ë§ MVCëŠ” ì»¨íŠ¸ë¡¤ëŸ¬(í•¸ë“¤ëŸ¬) ë°–ìœ¼ë¡œ ì˜ˆì™¸ê°€ ë˜ì ¸ì§„ ê²½ìš° ì˜ˆì™¸ë¥¼ í•´ê²°í•˜ê³ , ë™ì‘ì„ ìƒˆë¡œ ì •ì˜í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.ì»¨íŠ¸ë¡¤ëŸ¬ ë°–ìœ¼ë¡œ ë˜ì ¸ì§„ ì˜ˆì™¸ë¥¼ í•´ê²°í•˜ê³ , ë™ì‘ ë°©ì‹ì„ ë³€ê²½í•˜ê³  ì‹¶ìœ¼ë©´ `HandlerExceptionResolver` ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ì¤„ì—¬ì„œ `ExceptionResolver` ë¼ í•œë‹¤.**ExceptionResolver ì ìš© ì „**![image](https://user-images.githubusercontent.com/83503188/211301950-47457bb7-9774-42cb-a707-f82fa6af3ec0.png)**ExceptionResolver ì ìš© í›„**![image](https://user-images.githubusercontent.com/83503188/211302075-15156d92-f5bf-4ac7-92d4-3efcb0099f5e.png)### **ğŸ”‹interface HandlerExceptionResolver**```javapublic interface HandlerExceptionResolver {    ModelAndView resolveException(        HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex);}```**MyHandlerExceptionResolver**```java@Slf4jpublic class MyHandlerExceptionResolver implements HandlerExceptionResolver {    @Override    public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {        try {            if (ex instanceof IllegalArgumentException) {                log.info("IllegalArgumentException resolver to 400");                response.sendError(HttpServletResponse.SC_BAD_REQUEST, ex.getMessage()); // ì´ê²Œ ì¤‘ìš”                return new ModelAndView();            }        } catch (IOException e) {            log.error("resolver ex", e);        }        return null;    }}```- `ExceptionResolver` ê°€ `ModelAndView` ë¥¼ ë°˜í™˜í•˜ëŠ” ì´ìœ ëŠ” ë§ˆì¹˜ try, catchë¥¼ í•˜ë“¯ì´, `Exception` ì„ ì²˜ë¦¬í•´ì„œ ì •ìƒ íë¦„ ì²˜ëŸ¼ ë³€ê²½í•˜ëŠ” ê²ƒì´ ëª©ì ì´ë‹¤.  ì´ë¦„ ê·¸ëŒ€ë¡œ Exception ì„ Resolver(í•´ê²°)í•˜ëŠ” ê²ƒì´ ëª©ì ì´ë‹¤.- ì—¬ê¸°ì„œëŠ” `IllegalArgumentException` ì´ ë°œìƒí•˜ë©´ `response.sendError(400)` ë¥¼ í˜¸ì¶œí•´ì„œ HTTP ìƒíƒœ ì½”ë“œë¥¼ 400ìœ¼ë¡œ ì§€ì •í•˜ê³ , ë¹ˆ `ModelAndView` ë¥¼ ë°˜í™˜í•œë‹¤.## **âš¡ï¸HandlerExceptionResolver ë°˜í™˜ ê°’ì— ë”°ë¥¸ ë™ì‘ ë°©ì‹**> **`ExceptionResolver`ëŠ” ì—¬ëŸ¬ ê°œ ë“±ë¡í•  ìˆ˜ ìˆë‹¤.**`HandlerExceptionResolver` ì˜ ë°˜í™˜ ê°’ì— ë”°ë¥¸ `DispatcherServlet` ì˜ ë™ì‘ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.**ë¹ˆ ModelAndView**: `new ModelAndView()` ì²˜ëŸ¼ ë¹ˆ ModelAndView ë¥¼ ë°˜í™˜í•˜ë©´ ë·°ë¥¼ ë Œë”ë§ í•˜ì§€ ì•Šê³ , ì •ìƒ íë¦„ìœ¼ë¡œ ì„œë¸”ë¦¿ì´ ë¦¬í„´ëœë‹¤.**ModelAndView ì§€ì •**: `ModelAndView` ì— `View` , `Model` ë“±ì˜ ì •ë³´ë¥¼ ì§€ì •í•´ì„œ ë°˜í™˜í•˜ë©´ ë·°ë¥¼ ë Œë”ë§ í•œë‹¤.**`null`**: `null` ì„ ë°˜í™˜í•˜ë©´, ë‹¤ìŒ `ExceptionResolver` ë¥¼ ì°¾ì•„ì„œ ì‹¤í–‰í•œë‹¤.- `null` ì„ ë°˜í™˜í•˜ë©´, ë‹¤ìŒ `ExceptionResolver` ë¥¼ ì°¾ì•„ì„œ ì‹¤í–‰í•œë‹¤. ë§Œì•½ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” `ExceptionResolver` ê°€ ì—†ìœ¼ë©´ ì˜ˆì™¸ ì²˜ë¦¬ê°€ ì•ˆë˜ê³ , ê¸°ì¡´ì— ë°œìƒí•œ ì˜ˆì™¸ë¥¼ ì„œë¸”ë¦¿ ë°–ìœ¼ë¡œ ë˜ì§„ë‹¤.- í˜„ì¬ `RuntimeException`ì´ ë°œìƒí•˜ë©´ ì¡°ê±´ë¬¸ì— ê±¸ë¦¬ì§€ ì•Šìœ¼ë¯€ë¡œ `null`ì´ ë°˜í™˜ëœë‹¤. ê·¸ëŸ¬ë©´ ê¸°ì¡´ ì˜ˆì™¸ê°€ WASê¹Œì§€ ë„ë‹¬í•œë‹¤.**ë¹ˆ ModelAndView(`new ModelAndView()`)** ëŠ” ë‹¤ë¥¸ `ExceptionResolver` ë¥¼ ì°¾ì•„ì„œ ì‹¤í–‰í•˜ì§€ ì•Šê³  ì •ìƒ íë¦„ìœ¼ë¡œ `ì„œë¸”ë¦¿(WAS)` ì— ë°˜í™˜ë˜ê³ ,  **`null`** ì€ ë°˜í™˜í•˜ë©´, ë‹¤ìŒ `ExceptionResolver` ë¥¼ ì°¾ì•„ì„œ ì‹¤í–‰í•œë‹¤. ë§Œì•½ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” `ExceptionResolver` ê°€ ì—†ìœ¼ë©´ ì˜ˆì™¸ ì²˜ë¦¬ê°€ ì•ˆë˜ê³ , ê¸°ì¡´ì— ë°œìƒí•œ ì˜ˆì™¸ë¥¼ ì„œë¸”ë¦¿ ë°–ìœ¼ë¡œ ë˜ì§„ë‹¤.### **ğŸ”‹ExceptionResolver í™œìš©****ì˜ˆì™¸ ìƒíƒœ ì½”ë“œ ë³€í™˜**- ì˜ˆì™¸ë¥¼ `response.sendError(xxx)` í˜¸ì¶œë¡œ ë³€ê²½í•´ì„œ ì„œë¸”ë¦¿ì—ì„œ ìƒíƒœ ì½”ë“œì— ë”°ë¥¸ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ìœ„ì„- ì´í›„ WASëŠ” ì„œë¸”ë¦¿ ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ì°¾ì•„ì„œ ë‚´ë¶€ í˜¸ì¶œ, ì˜ˆë¥¼ ë“¤ì–´ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •í•œ `/error` ê°€ í˜¸ì¶œë¨**ë·° í…œí”Œë¦¿ ì²˜ë¦¬**- `ModelAndView` ì— ê°’ì„ ì±„ì›Œì„œ ì˜ˆì™¸ì— ë”°ë¥¸ ìƒˆë¡œìš´ ì˜¤ë¥˜ í™”ë©´ ë·° ë Œë”ë§ í•´ì„œ ê³ ê°ì—ê²Œ ì œê³µ**API ì‘ë‹µ ì²˜ë¦¬**- `response.getWriter().println("hello");` ì²˜ëŸ¼ HTTP ì‘ë‹µ ë°”ë””ì— ì§ì ‘ ë°ì´í„°ë¥¼ ë„£ì–´ì£¼ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤. ì—¬ê¸°ì— JSON ìœ¼ë¡œ ì‘ë‹µí•˜ë©´ API ì‘ë‹µ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.![image](https://user-images.githubusercontent.com/83503188/211305745-a886bab1-f8f1-4588-a24c-38484667ee47.png)**WebConfig - ìˆ˜ì •**```java@Overridepublic void extendHandlerExceptionResolvers(List<HandlerExceptionResolver>resolvers) {    resolvers.add(new MyHandlerExceptionResolver());}```- `configureHandlerExceptionResolvers(..)` ë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ì´ ê¸°ë³¸ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” `ExceptionResolver` ê°€ ì œê±°ë˜ë¯€ë¡œ ì£¼ì˜, `extendHandlerExceptionResolvers` ë¥¼ ì‚¬ìš©í•˜ì.![image](https://user-images.githubusercontent.com/83503188/211302849-3ff53635-deb8-491a-b623-e098b8fbf03a.png)<br/><br/><br/># ğŸ’¡API ì˜ˆì™¸ ì²˜ë¦¬ - CustomizeHandlerExceptionResolverì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ WASê¹Œì§€ ì˜ˆì™¸ê°€ ë˜ì ¸ì§€ê³ , WASì—ì„œ ì˜¤ë¥˜ í˜ì´ì§€ ì •ë³´ë¥¼ ì°¾ì•„ì„œ ë‹¤ì‹œ `/error` ë¥¼ í˜¸ì¶œí•˜ëŠ” ê³¼ì •ì€ ìƒê°í•´ë³´ë©´ ë„ˆë¬´ ë³µì¡í•˜ë‹¤.`ExceptionResolver` ë¥¼ í™œìš©í•˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ ì´ëŸ° ë³µì¡í•œ ê³¼ì • ì—†ì´ ì—¬ê¸°ì—ì„œ ë¬¸ì œë¥¼ ê¹”ë”í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.**UserException**```javapublic class UserException extends RuntimeException {    public UserException() {        super();    }    public UserException(String message) {        super(message);    }    public UserException(String message, Throwable cause) {        super(message, cause);    }    public UserException(Throwable cause) {        super(cause);    }    protected UserException(String message, Throwable cause, boolean enableSuppression, boolean writableStackTrace) {        super(message, cause, enableSuppression, writableStackTrace);    }}```**ApiExceptionController - ì˜ˆì™¸ ì¶”ê°€**```java    @GetMapping("/api/members/{id}")    public MemberDto getMember(@PathVariable("id") String id) {        if (id.equals("ex")) {            throw new RuntimeException("ì˜ëª»ëœ ì‚¬ìš©ì");        }        if (id.equals("bad")) {            throw new IllegalArgumentException("ì˜ëª»ëœ ì…ë ¥ ê°’");        }                if (id.equals("user-ex")) {            throw new UserException("ì‚¬ìš©ì ì˜¤ë¥˜");        }        return new MemberDto(id, "hello " + id);    }```**UserHandlerExceptionResolver**```java@Slf4jpublic class UserExceptionResolver implements HandlerExceptionResolver {    private final ObjectMapper objectMapper = new ObjectMapper();    @Override    public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {        try {            if (ex instanceof UserException) {                log.info("UserException resolver to 400");                String acceptHeader = request.getHeader("accept");                response.setStatus(HttpServletResponse.SC_BAD_REQUEST);                if ("application/json".equals(acceptHeader)) {                    Map<String, Object> errorResult = new HashMap<>();                    errorResult.put("ex", ex.getClass());                    errorResult.put("message", ex.getMessage());                    String result = objectMapper.writeValueAsString(errorResult);                    response.setContentType("application/json");                    response.setCharacterEncoding("utf-8");                    response.getWriter().write(result);                    return new ModelAndView();                } else {                    return new ModelAndView("error/500");                }            }        } catch (IOException e) {            log.error("resolver ex", e);        }        return null;    }}```- HTTP ìš”ì²­ í•´ë”ì˜ `ACCEPT` ê°’ì´ `application/json` ì´ë©´ JSONìœ¼ë¡œ ì˜¤ë¥˜ë¥¼ ë‚´ë ¤ì£¼ê³ , ê·¸ ì™¸ ê²½ìš°ì—ëŠ” error/500ì— ìˆëŠ” HTML ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤€ë‹¤.- `sendError()`ê°€ ì¡´ì¬í•˜ì§€ ì•Šê³ , ë¹ˆ ModelAndViewë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì—ì„œëŠ” ë‹¤ì‹œ `/error`ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê³  ì •ìƒ íë¦„ìœ¼ë¡œ responseë¥¼ ë°˜í™˜í•œë‹¤.ì •ë¦¬í•˜ìë©´ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ DispatcherServlet ê¹Œì§€ ì˜¬ë¼ê°€ì„œ DispatcherServlet ì€ í•´ë‹¹ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ”ì§€ ExceptionHandler ë¥¼ ì¡°íšŒí•œë‹¤.ExceptionHandler ì—ì„œ í•´ë‹¹ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ë©´ í˜„ì¬ ë¹ˆ ModelAndView ë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ë·° ë Œë”ë§í•˜ì§€ ì•Šê³  WASì— ì •ìƒ ì‘ë‹µìœ¼ë¡œ ì „ë‹¬ë˜ê³ , WASì—ì„œëŠ” response ê°ì²´ë¥¼ í™•ì¸í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•œë‹¤.**WebConfigì— UserHandlerExceptionResolver ì¶”ê°€**```java@Overridepublic void extendHandlerExceptionResolvers(List<HandlerExceptionResolver> resolvers) {        resolvers.add(new MyHandlerExceptionResolver());        resolvers.add(new UserExceptionResolver());}```![image](https://user-images.githubusercontent.com/83503188/211307154-b845d3cb-860a-4914-95c8-925b2dd3d180.png)<br/>## **âš¡ï¸CustomizeHandlerExceptionResolver ì •ë¦¬**`ExceptionResolver` ë¥¼ ì‚¬ìš©í•˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•´ë„ `ExceptionResolver` ì—ì„œ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•´ë²„ë¦°ë‹¤.**ë”°ë¼ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•´ë„ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê¹Œì§€ ì˜ˆì™¸ê°€ ì „ë‹¬ë˜ì§€ ì•Šê³ , ìŠ¤í”„ë§ MVCì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬ëŠ” ëì´ ë‚œë‹¤.**  ê²°ê³¼ì ìœ¼ë¡œ **`WAS` ì…ì¥ì—ì„œëŠ” ì •ìƒ ì²˜ë¦¬ê°€ ëœ ê²ƒì´ë‹¤.**   ì´ë ‡ê²Œ **ì˜ˆì™¸ë¥¼ ExceptionResolver ì—ì„œ ëª¨ë‘ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ í•µì‹¬ì´ë‹¤.**ê·¸ëŸ°ë° ì§ì ‘ `ExceptionResolver` ë¥¼ êµ¬í˜„í•˜ë ¤ê³  í•˜ë‹ˆ ìƒë‹¹íˆ ë³µì¡í•˜ë‹¤. ì§€ê¸ˆë¶€í„° ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” `ExceptionResolver` ë“¤ì„ ì•Œì•„ë³´ì.<br/><br/>## **âš¡ï¸ExceptionResolver ì‘ë™ ì •ë¦¬**ExceptionResolverëŠ” Errorë¥¼ í•´ê²°í•  'ê¸°íšŒ'ê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤.Resolverì—ì„œ HttpServletResponse.sendError()ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ModelAndViewë¥¼ ì •ìƒì ìœ¼ë¡œ ë¦¬í„´í•œë‹¤ë©´, WAS ë‚´ë¶€ì ì¸ í˜¸ì¶œ ì—†ì´ ë°”ë¡œ Http ì‘ë‹µì„ ë¦¬í„´í•©ë‹ˆë‹¤.í•˜ì§€ë§Œ Resolverì—ì„œ sendErrorë¥¼ ë°œìƒì‹œí‚¤ê²Œ ëœë‹¤ë©´, WASê°€ dispatcherType == ERROR í˜•ì‹ìœ¼ë¡œ ë‹¤ì‹œ ë‚´ë¶€ì ì¸ ìš”ì²­ì„ í•˜ê²Œ ë©ë‹ˆë‹¤. (ì´ê²ƒì„ BasicErrorControllerê°€ ì²˜ë¦¬)<br/><br/><br/># ğŸ’¡ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ExceptionResolver - `ResponseStatusExceptionResolver`ì˜ˆì™¸ëŠ” ì²˜ë¦¬í•˜ì§€ ì•Šìœ¼ë©´ 500ì—ëŸ¬ì•ì—ì„œ ì²˜ëŸ¼ ExceptionResolver ì„ ì§ì ‘ êµ¬í˜„í•˜ì§€ ì•Šê³ , ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” `ExceptionResolver` ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.`HandlerExceptionResolverComposite` ì— ë‹¤ìŒ ìˆœì„œë¡œ ë“±ë¡1. ExceptionHandlerExceptionResolver2. ResponseStatusExceptionResolver3. DefaultHandlerExceptionResolver ìš°ì„  ìˆœìœ„ê°€ ê°€ì¥ ë‚®ë‹¤.**ExceptionHandlerExceptionResolver**- `@ExceptionHandler` ì„ ì²˜ë¦¬í•œë‹¤. API ì˜ˆì™¸ ì²˜ë¦¬ëŠ” ëŒ€ë¶€ë¶„ ì´ ê¸°ëŠ¥ìœ¼ë¡œ í•´ê²°í•œë‹¤.**ResponseStatusExceptionResolver**- HTTP ìƒíƒœ ì½”ë“œë¥¼ ì§€ì •í•´ì¤€ë‹¤.    - ì˜ˆ) `@ResponseStatus(value = HttpStatus.NOT_FOUND)`**DefaultHandlerExceptionResolver**- ìŠ¤í”„ë§ ë‚´ë¶€ ê¸°ë³¸ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•œë‹¤.## âš¡ï¸ResponseStatusExceptionResolver`ResponseStatusExceptionResolver` ëŠ” ì˜ˆì™¸ì— ë”°ë¼ì„œ HTTP ìƒíƒœ ì½”ë“œë¥¼ ì§€ì •í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.- `@ResponseStatus` ê°€ ë‹¬ë ¤ìˆëŠ” ì˜ˆì™¸- `ResponseStatusException` ì˜ˆì™¸![image](https://user-images.githubusercontent.com/83503188/211546475-2e21bc89-44e9-4b50-8ca0-0286b81f108d.png)- `@ResponseStatus`ì— ì§€ì •í•œ ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ì½”ë“œ![image](https://user-images.githubusercontent.com/83503188/211545999-eba8a864-629b-4763-9c30-db70ec17b1e3.png)- `ResponseStatusExceptionResolver` ì˜ ë‚´ë¶€ë„ ì•ì—ì„œ ë§Œë“  êµ¬ì¡°ì™€ ë¹„ìŠ·í•˜ë‹¤.ì˜ˆì™¸ì— ë‹¤ìŒê³¼ ê°™ì´ `@ResponseStatus` ì• ë…¸í…Œì´ì…˜ì„ ì ìš©í•˜ë©´ HTTP ìƒíƒœ ì½”ë“œë¥¼ ë³€ê²½í•´ì¤€ë‹¤.```java@ResponseStatus(code = HttpStatus.BAD_REQUEST, reason = "ì˜ëª»ëœ ìš”ì²­ ì˜¤ë¥˜")public class BadRequestException extends RuntimeException{}```![image](https://user-images.githubusercontent.com/83503188/211543415-87fb81c0-9f0d-43e5-a10f-c7ef8d7d372b.png)`BadRequestException` ì˜ˆì™¸ê°€ ì»¨íŠ¸ë¡¤ëŸ¬ ë°–ìœ¼ë¡œ ë„˜ì–´ê°€ë©´ `ResponseStatusExceptionResolver` ì˜ˆì™¸ê°€ í•´ë‹¹ ì• ë…¸í…Œì´ì…˜ì„ í™•ì¸í•´ì„œ ì˜¤ë¥˜ ì½”ë“œë¥¼ HttpStatus.BAD_REQUEST (400)ìœ¼ë¡œ ë³€ê²½í•˜ê³ , ë©”ì‹œì§€ë„ ë‹´ëŠ”ë‹¤.`ResponseStatusExceptionResolver` ì½”ë“œë¥¼ í™•ì¸í•´ë³´ë©´ ê²°êµ­ `response.sendError(statusCode, resolvedReason)` ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.`sendError(400)` ë¥¼ í˜¸ì¶œí–ˆê¸° ë•Œë¬¸ì— WASì—ì„œ ë‹¤ì‹œ ì˜¤ë¥˜ í˜ì´ì§€( `/error` )ë¥¼ ë‚´ë¶€ ìš”ì²­í•œë‹¤.<br/>## **âš¡ï¸ë©”ì‹œì§€ ê¸°ëŠ¥**`reason` ì„ `MessageSource` ì—ì„œ ì°¾ëŠ” ê¸°ëŠ¥ë„ ì œê³µí•œë‹¤. `reason = "error.bad"``messages.properties````propertieserror.bad=ì˜ëª»ëœ ìš”ì²­ ì˜¤ë¥˜ì…ë‹ˆë‹¤. ë©”ì‹œì§€ ì‚¬ìš©``````java@ResponseStatus(code = HttpStatus.BAD_REQUEST, reason = "error.bad")public class BadRequestException extends RuntimeException{}```<br/>## **âš¡ï¸ResponseStatusException**`@ResponseStatus` ëŠ” ê°œë°œìê°€ ì§ì ‘ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ì˜ˆì™¸ì—ëŠ” ì ìš©í•  ìˆ˜ ì—†ë‹¤. (ì• ë…¸í…Œì´ì…˜ì„ ì§ì ‘ ë„£ì–´ì•¼ í•˜ëŠ”ë°, ë‚´ê°€ ì½”ë“œë¥¼ ìˆ˜ì •í•  ìˆ˜ ì—†ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì˜ˆì™¸ ì½”ë“œ ê°™ì€ ê³³ì—ëŠ” ì ìš©í•  ìˆ˜ ì—†ë‹¤.)ì¶”ê°€ë¡œ ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì¡°ê±´ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒë„ ì–´ë µë‹¤. ì´ë•ŒëŠ” `ResponseStatusException` ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.**ApiExceptionController - ì¶”ê°€**```java@GetMapping("/api/response-status-ex2")public String responseStatusEx2() {    throw new ResponseStatusException(HttpStatus.NOT_FOUND, "error.bad", new IllegalArgumentException());}```<br/><br/><br/># ğŸ’¡ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ExceptionResolver - `DefaultHandlerExceptionResolver`ì´ë²ˆì—ëŠ” `DefaultHandlerExceptionResolver` ë¥¼ ì‚´í´ë³´ì.`DefaultHandlerExceptionResolver` ëŠ” ìŠ¤í”„ë§ ë‚´ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ìŠ¤í”„ë§ ì˜ˆì™¸ë¥¼ í•´ê²°í•œë‹¤.ëŒ€í‘œì ìœ¼ë¡œ íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì‹œì ì— íƒ€ì…ì´ ë§ì§€ ì•Šìœ¼ë©´ ë‚´ë¶€ì—ì„œ `TypeMismatchException` ì´ ë°œìƒí•˜ëŠ”ë°, ì´ ê²½ìš° ì˜ˆì™¸ê°€ ë°œìƒí–ˆê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ ë‘ë©´ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê¹Œì§€ ì˜¤ë¥˜ê°€ ì˜¬ë¼ê°€ê³ , ê²°ê³¼ì ìœ¼ë¡œ 500 ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.ê·¸ëŸ°ë° íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ì€ ëŒ€ë¶€ë¶„ í´ë¼ì´ì–¸íŠ¸ê°€ HTTP ìš”ì²­ ì •ë³´ë¥¼ ì˜ëª» í˜¸ì¶œí•´ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œì´ë‹¤.HTTP ì—ì„œëŠ” ì´ëŸ° ê²½ìš° HTTP ìƒíƒœ ì½”ë“œ 400ì„ ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ ìˆë‹¤.`DefaultHandlerExceptionResolver` ëŠ” ì´ê²ƒì„ 500 ì˜¤ë¥˜ê°€ ì•„ë‹ˆë¼ HTTP ìƒíƒœ ì½”ë“œ 400 ì˜¤ë¥˜ë¡œ ë³€ê²½í•œë‹¤.![image](https://user-images.githubusercontent.com/83503188/211547753-b97cc35d-0a30-4b4a-8996-3800b2299adc.png)**ApiExceptionController - ì¶”ê°€**```java    @GetMapping("/api/default-handler-ex")    public String defaultException(@RequestParam Integer data) {        return "ok";    }```![image](https://user-images.githubusercontent.com/83503188/211548359-1ff54938-8149-47ea-b878-29412380f73a.png)ì§€ê¸ˆê¹Œì§€ HTTP ìƒíƒœ ì½”ë“œë¥¼ ë³€ê²½í•˜ê³ , ìŠ¤í”„ë§ ë‚´ë¶€ ì˜ˆì™¸ì˜ ìƒíƒœì½”ë“œë¥¼ ë³€ê²½í•˜ëŠ” ê¸°ëŠ¥ë„ ì•Œì•„ë³´ì•˜ë‹¤.ê·¸ëŸ°ë° `HandlerExceptionResolver` ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê¸°ëŠ” ë³µì¡í•˜ë‹¤. API ì˜¤ë¥˜ ì‘ë‹µì˜ ê²½ìš° `response` ì— ì§ì ‘ ë°ì´í„°ë¥¼ ë„£ì–´ì•¼ í•´ì„œ ë§¤ìš° ë¶ˆí¸í•˜ê³  ë²ˆê±°ë¡­ë‹¤.`ModelAndView` ë¥¼ ë°˜í™˜í•´ì•¼ í•˜ëŠ” ê²ƒë„ APIì—ëŠ” ì˜ ë§ì§€ ì•ŠëŠ”ë‹¤. -> `ResponseEntity`ë¥¼ ë°˜í™˜í•˜ëŠ”ê²Œ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì´ì „ì— ì„œë¸”ë¦¿ ì½”ë“œì²˜ëŸ¼ response ì— ì§ì ‘ ë°ì´í„°ë¥¼ ë„£ì–´ì£¼ëŠ”ê²Œ ë³µì¡í•˜ë‹¤.ìŠ¤í”„ë§ì€ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ `@ExceptionHandler` ë¼ëŠ” ë§¤ìš° í˜ì‹ ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.<br/><br/><br/># ğŸ’¡ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ExceptionResolver - `@ExceptionResolver`, `ExceptionHandlerExceptionResolver`**HTML í™”ë©´ ì˜¤ë¥˜ vs API ì˜¤ë¥˜**ì›¹ ë¸Œë¼ìš°ì €ì— HTML í™”ë©´ì„ ì œê³µí•  ë•ŒëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ `BasicErrorController` ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ í¸í•˜ë‹¤.ì´ë•ŒëŠ” ë‹¨ìˆœíˆ 5xx, 4xx ê´€ë ¨ëœ ì˜¤ë¥˜ í™”ë©´ì„ ë³´ì—¬ì£¼ë©´ ëœë‹¤. `BasicErrorController` ëŠ” ì´ëŸ° ë©”ì»¤ë‹ˆì¦˜ì„ ëª¨ë‘ êµ¬í˜„í•´ë‘ì—ˆë‹¤.ê·¸ëŸ°ë° APIëŠ” ê° ì‹œìŠ¤í…œ ë§ˆë‹¤ ì‘ë‹µì˜ ëª¨ì–‘ë„ ë‹¤ë¥´ê³ , ìŠ¤í™ë„ ëª¨ë‘ ë‹¤ë¥´ë‹¤. ì˜ˆì™¸ ìƒí™©ì— ë‹¨ìˆœíˆ ì˜¤ë¥˜ í™”ë©´ì„ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì˜ˆì™¸ì— ë”°ë¼ì„œ ê°ê° ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ì¶œë ¥í•´ì•¼ í•  ìˆ˜ë„ ìˆë‹¤.ê·¸ë¦¬ê³  ê°™ì€ ì˜ˆì™¸ë¼ê³  í•´ë„ ì–´ë–¤ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë°œìƒí–ˆëŠ”ê°€ì— ë”°ë¼ì„œ ë‹¤ë¥¸ ì˜ˆì™¸ ì‘ë‹µì„ ë‚´ë ¤ì£¼ì–´ì•¼ í•  ìˆ˜ ìˆë‹¤.í•œë§ˆë””ë¡œ ë§¤ìš° ì„¸ë°€í•œ ì œì–´ê°€ í•„ìš”í•˜ë‹¤.ì˜ˆë¥¼ ë“¤ì–´ì„œ ìƒí’ˆ APIì™€ ì£¼ë¬¸ APIëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì„ ë•Œ ì‘ë‹µì˜ ëª¨ì–‘ì´ ì™„ì „íˆ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.ê²°êµ­ ì§€ê¸ˆê¹Œì§€ ì‚´í´ë³¸ `BasicErrorController` ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ `HandlerExceptionResolver` ë¥¼ ì§ì ‘ êµ¬í˜„í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ API ì˜ˆì™¸ë¥¼ ë‹¤ë£¨ê¸°ëŠ” ì‰½ì§€ ì•Šë‹¤.**API ì˜ˆì™¸ì²˜ë¦¬ì˜ ì–´ë ¤ìš´ ì **- `HandlerExceptionResolver` ë¥¼ ë– ì˜¬ë ¤ ë³´ë©´ `ModelAndView` ë¥¼ ë°˜í™˜í•´ì•¼ í–ˆë‹¤. ì´ê²ƒì€ API ì‘ë‹µì—ëŠ” í•„ìš”í•˜ì§€ ì•Šë‹¤.- API ì‘ë‹µì„ ìœ„í•´ì„œ `HttpServletResponse` ì— ì§ì ‘ ì‘ë‹µ ë°ì´í„°ë¥¼ ë„£ì–´ì£¼ì—ˆë‹¤. ì´ê²ƒì€ ë§¤ìš° ë¶ˆí¸í•˜ë‹¤. ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬ì— ë¹„ìœ í•˜ë©´ ë§ˆì¹˜ ê³¼ê±° ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ë˜ ì‹œì ˆë¡œ ëŒì•„ê°„ ê²ƒ ê°™ë‹¤.- íŠ¹ì • ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œë§Œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ë³„ë„ë¡œ ì²˜ë¦¬í•˜ê¸° ì–´ë µë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ íšŒì›ì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë°œìƒí•˜ëŠ” `RuntimeException` ì˜ˆì™¸ì™€ ìƒí’ˆì„ ê´€ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë°œìƒí•˜ëŠ” ë™ì¼í•œ `RuntimeException` ì˜ˆì™¸ë¥¼ ì„œë¡œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ì‹¶ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?**@ExceptionHandler**ìŠ¤í”„ë§ì€ API ì˜ˆì™¸ ì²˜ë¦¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ `@ExceptionHandler` ë¼ëŠ” ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ë§¤ìš° í¸ë¦¬í•œ ì˜ˆì™¸ ì²˜ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ”ë°, ì´ê²ƒì´ ë°”ë¡œ `ExceptionHandlerExceptionResolver` ì´ë‹¤.ìŠ¤í”„ë§ì€ `ExceptionHandlerExceptionResolver` ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ê³ , ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” `ExceptionResolver` ì¤‘ì— ìš°ì„ ìˆœìœ„ë„ ê°€ì¥ ë†’ë‹¤. ì‹¤ë¬´ì—ì„œ API ì˜ˆì™¸ ì²˜ë¦¬ëŠ” ëŒ€ë¶€ë¶„ ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤.**ErrorResult**```java@Data@AllArgsConstructorpublic class ErrorResult {    private String code;    private String message;}```- ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ API ì‘ë‹µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê°ì²´**ApiExceptionV2Controller**```java@Slf4j@RestControllerpublic class ApiExceptionV2Controller {    @ResponseStatus(HttpStatus.BAD_REQUEST)    @ExceptionHandler(IllegalArgumentException.class)    public ErrorResult illegalExHandle(IllegalArgumentException e) {        log.error("[exceptionHandle] ex", e);        return new ErrorResult("BAD", e.getMessage());    }    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)    @ExceptionHandler    public ErrorResult exHandle(Exception e) {        log.error("[exceptionHandle] ex", e);        return new ErrorResult("EX", "ë‚´ë¶€ ì˜¤ë¥˜");    }    @ExceptionHandler    public ResponseEntity<ErrorResult> userExHandle(UserException e) {        log.error("[exceptionHandle ex", e);        ErrorResult errorResult = new ErrorResult("USER-EX", e.getMessage());        return new ResponseEntity<>(errorResult, HttpStatus.BAD_REQUEST);    }    @GetMapping("/api2/members/{id}")    public MemberDto getMember(@PathVariable("id") String id) {        if (id.equals("ex")) {            throw new RuntimeException("ì˜ëª»ëœ ì‚¬ìš©ì");        }        if (id.equals("bad")) {            throw new IllegalArgumentException("ì˜ëª»ëœ ì…ë ¥ ê°’");        }        if (id.equals("user-ex")) {            throw new UserException("ì‚¬ìš©ì ì˜¤ë¥˜");        }        return new MemberDto(id, "hello " + id);    }    @Data    @AllArgsConstructor    static class MemberDto {        private String memberId;        private String name;    }}```**@ExceptionHandler ì˜ˆì™¸ ì²˜ë¦¬ ë°©ë²•**`@ExceptionHandler`ëŠ” í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œë§Œ ì˜í–¥ì„ ì¤€ë‹¤.`@ExceptionHandler` ì• ë…¸í…Œì´ì…˜ì„ ì„ ì–¸í•˜ê³ , í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì²˜ë¦¬í•˜ê³  ì‹¶ì€ ì˜ˆì™¸ë¥¼ ì§€ì •í•´ì£¼ë©´ ëœë‹¤.í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ ì´ ë©”ì„œë“œê°€ í˜¸ì¶œëœë‹¤. ì°¸ê³ ë¡œ ì§€ì •í•œ ì˜ˆì™¸ ë˜ëŠ” ê·¸ ì˜ˆì™¸ì˜ ìì‹ í´ë˜ìŠ¤ëŠ” ëª¨ë‘ ì¡ì„ ìˆ˜ ìˆë‹¤.ë‹¤ìŒ ì˜ˆì œëŠ” `IllegalArgumentException` ë˜ëŠ” ê·¸ í•˜ìœ„ ìì‹ í´ë˜ìŠ¤ë¥¼ ëª¨ë‘ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.```java    @ExceptionHandler(IllegalArgumentException.class)    public ErrorResult illegalExHandle(IllegalArgumentException e) {        log.error("[exceptionHandle] ex", e);        return new ErrorResult("BAD", e.getMessage());    }```- `@ResponseStatus`ë¥¼ í†µí•´ ìƒíƒœ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ 200OKë¥¼ ë°˜í™˜í•œë‹¤.**ìš°ì„ ìˆœìœ„**ìŠ¤í”„ë§ì˜ ìš°ì„ ìˆœìœ„ëŠ” í•­ìƒ ìì„¸í•œ ê²ƒì´ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤.`@ExceptionHandler` ì— ì§€ì •í•œ ë¶€ëª¨ í´ë˜ìŠ¤ëŠ” ìì‹ í´ë˜ìŠ¤ê¹Œì§€ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ìì‹ì˜ˆì™¸ ê°€ ë°œìƒí•˜ë©´ `ë¶€ëª¨ì˜ˆì™¸ì²˜ë¦¬()` , `ìì‹ì˜ˆì™¸ì²˜ë¦¬()` ë‘˜ë‹¤ í˜¸ì¶œ ëŒ€ìƒì´ ëœë‹¤.ê·¸ëŸ°ë° ë‘˜ ì¤‘ ë” ìì„¸í•œ ê²ƒì´ ìš°ì„ ê¶Œì„ ê°€ì§€ë¯€ë¡œ `ìì‹ì˜ˆì™¸ì²˜ë¦¬()` ê°€ í˜¸ì¶œëœë‹¤. ë¬¼ë¡  ë¶€ëª¨ì˜ˆì™¸ ê°€ í˜¸ì¶œë˜ë©´ `ë¶€ëª¨ì˜ˆì™¸ì²˜ë¦¬()` ë§Œ í˜¸ì¶œ ëŒ€ìƒì´ ë˜ë¯€ë¡œ `ë¶€ëª¨ì˜ˆì™¸ì²˜ë¦¬()` ê°€ í˜¸ì¶œëœë‹¤.**ë‹¤ì–‘í•œ ì˜ˆì™¸**ë‹¤ìŒê³¼ ê°™ì´ ë‹¤ì–‘í•œ ì˜ˆì™¸ë¥¼ í•œë²ˆì— ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.```java@ExceptionHandler({AException.class, BException.class})public String ex(Exception e) {    log.info("exception e", e);}```**ì˜ˆì™¸ ìƒëµ**`@ExceptionHandler` ì— ì˜ˆì™¸ë¥¼ ìƒëµí•  ìˆ˜ ìˆë‹¤. ìƒëµí•˜ë©´ ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ì˜ ì˜ˆì™¸ê°€ ì§€ì •ëœë‹¤.```java@ExceptionHandlerpublic ResponseEntity<ErrorResult> userExHandle(UserException e) {}```**íŒŒë¦¬ë¯¸í„°ì™€ ì‘ë‹µ**`@ExceptionHandler` ì—ëŠ” ë§ˆì¹˜ ìŠ¤í”„ë§ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ íŒŒë¼ë¯¸í„° ì‘ë‹µì²˜ëŸ¼ ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ì™€ ì‘ë‹µì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.- https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-annexceptionhandler-args![image](https://user-images.githubusercontent.com/83503188/211559357-2b52cdcf-5104-4a45-9fe1-3c5a79911aba.png)**IllegalArgumentException ì²˜ë¦¬**```java    @ResponseStatus(HttpStatus.BAD_REQUEST)    @ExceptionHandler(IllegalArgumentException.class)    public ErrorResult illegalExHandle(IllegalArgumentException e) {        log.error("[exceptionHandle] ex", e);        return new ErrorResult("BAD", e.getMessage());    }```- ì‹¤í–‰ íë¦„    - ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•œ ê²°ê³¼ `IllegalArgumentException` ì˜ˆì™¸ê°€ ì»¨íŠ¸ë¡¤ëŸ¬ ë°–ìœ¼ë¡œ ë˜ì ¸ì§„ë‹¤.    - ì˜ˆì™¸ê°€ ë°œìƒí–ˆìœ¼ë¡œ `ExceptionResolver` ê°€ ì‘ë™í•œë‹¤. ê°€ì¥ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ `ExceptionHandlerExceptionResolver` ê°€ ì‹¤í–‰ëœë‹¤.    - `ExceptionHandlerExceptionResolver` ëŠ” í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì— `IllegalArgumentException` ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” `@ExceptionHandler` ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.    - `illegalExHandle()` ë¥¼ ì‹¤í–‰í•œë‹¤. `@RestController` ì´ë¯€ë¡œ `illegalExHandle()` ì—ë„ `@ResponseBody` ê°€ ì ìš©ëœë‹¤. ë”°ë¼ì„œ HTTP ì»¨ë²„í„°ê°€ ì‚¬ìš©ë˜ê³ , ì‘ë‹µì´ ë‹¤ìŒê³¼ ê°™ì€ JSONìœ¼ë¡œ ë°˜í™˜ëœë‹¤.    - `@ResponseStatus(HttpStatus.BAD_REQUEST)` ë¥¼ ì§€ì •í–ˆìœ¼ë¯€ë¡œ HTTP ìƒíƒœ ì½”ë“œ 400ìœ¼ë¡œ ì‘ë‹µí•œë‹¤.![image](https://user-images.githubusercontent.com/83503188/211554539-e56b0416-82be-4b25-8dcd-bab8a421919f.png)**UserException ì²˜ë¦¬**```java    @ExceptionHandler    public ResponseEntity<ErrorResult> userExHandle(UserException e) {        log.error("[exceptionHandle ex", e);        ErrorResult errorResult = new ErrorResult("USER-EX", e.getMessage());        return new ResponseEntity<>(errorResult, HttpStatus.BAD_REQUEST);    }```- `@ExceptionHandler` ì— ì˜ˆì™¸ë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ í•´ë‹¹ ë©”ì„œë“œ íŒŒë¼ë¯¸í„° ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•œë‹¤. ì—¬ê¸°ì„œëŠ” `UserException` ì„ ì‚¬ìš©í•œë‹¤.- `ResponseEntity` ë¥¼ ì‚¬ìš©í•´ì„œ HTTP ë©”ì‹œì§€ ë°”ë””ì— ì§ì ‘ ì‘ë‹µí•œë‹¤. ë¬¼ë¡  HTTP ì»¨ë²„í„°ê°€ ì‚¬ìš©ëœë‹¤.`ResponseEntity` ë¥¼ ì‚¬ìš©í•˜ë©´ HTTP ì‘ë‹µ ì½”ë“œë¥¼ í”„ë¡œê·¸ë˜ë°í•´ì„œ ë™ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. ì•ì„œ ì‚´í´ë³¸ `@ResponseStatus` ëŠ” ì• ë…¸í…Œì´ì…˜ì´ë¯€ë¡œ HTTP ì‘ë‹µ ì½”ë“œë¥¼ ë™ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.![image](https://user-images.githubusercontent.com/83503188/211555116-9fc4793e-a68d-41bb-aac1-4b4555390065.png)**Exception**```java    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)    @ExceptionHandler    public ErrorResult exHandle(Exception e) {        log.error("[exceptionHandle] ex", e);        return new ErrorResult("EX", "ë‚´ë¶€ ì˜¤ë¥˜");    }```- `throw new RuntimeException("ì˜ëª»ëœ ì‚¬ìš©ì")` ì´ ì½”ë“œê°€ ì‹¤í–‰ë˜ë©´ì„œ, ì»¨íŠ¸ë¡¤ëŸ¬ ë°–ìœ¼ë¡œ `RuntimeException` ì´ ë˜ì ¸ì§„ë‹¤.- `RuntimeException` ì€ `Exception` ì˜ ìì‹ í´ë˜ìŠ¤ì´ë‹¤. ë”°ë¼ì„œ ì´ ë©”ì„œë“œê°€ í˜¸ì¶œëœë‹¤.- `@ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)` ë¡œ HTTP ìƒíƒœ ì½”ë“œë¥¼ 500ìœ¼ë¡œ ì‘ë‹µí•œë‹¤.![image](https://user-images.githubusercontent.com/83503188/211555466-e3bf8b86-63ca-4081-897a-a506fe69f7ab.png)**HTML ì˜¤ë¥˜ í™”ë©´**![image](https://user-images.githubusercontent.com/83503188/211559555-549d5261-7f73-4602-ba44-0da48d9af68b.png)- String, View, ModelAndView ë°˜í™˜ì´ ê°€ëŠ¥í•˜ë‹¤ -> Controller ì™€ ë™ì¼ë‹¤ìŒê³¼ ê°™ì´ `ModelAndView` ë¥¼ ì‚¬ìš©í•´ì„œ ì˜¤ë¥˜ í™”ë©´(HTML)ì„ ì‘ë‹µí•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.```java@ExceptionHandler(ViewException.class)public ModelAndView ex(ViewException e) {    log.info("exception e", e);    return new ModelAndView("error");}```## API ì˜ˆì™¸ ì²˜ë¦¬ - @ControllerAdvice`@ExceptionHandler` ë¥¼ ì‚¬ìš©í•´ì„œ ì˜ˆì™¸ë¥¼ ê¹”ë”í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆì§€ë§Œ, ì •ìƒ ì½”ë“œì™€ ì˜ˆì™¸ ì²˜ë¦¬ ì½”ë“œê°€ í•˜ë‚˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì„ì—¬ ìˆë‹¤.`@ControllerAdvice` ë˜ëŠ” `@RestControllerAdvice` ë¥¼ ì‚¬ìš©í•˜ë©´ ë‘˜ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.**ExControllerAdvice**```java@Slf4j@RestControllerAdvicepublic class ExControllerAdvice {    @ResponseStatus(HttpStatus.BAD_REQUEST)    @ExceptionHandler(IllegalArgumentException.class)    public ErrorResult illegalExHandle(IllegalArgumentException e) {        log.error("[exceptionHandle] ex", e);        return new ErrorResult("BAD", e.getMessage());    }    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)    @ExceptionHandler    public ErrorResult exHandle(Exception e) {        log.error("[exceptionHandle] ex", e);        return new ErrorResult("EX", "ë‚´ë¶€ ì˜¤ë¥˜");    }    @ExceptionHandler    public ResponseEntity<ErrorResult> userExHandle(UserException e) {        log.error("[exceptionHandle ex", e);        ErrorResult errorResult = new ErrorResult("USER-EX", e.getMessage());        return new ResponseEntity<>(errorResult, HttpStatus.BAD_REQUEST);    }}```**@ControllerAdvice**- `@ControllerAdvice` ëŠ” ëŒ€ìƒìœ¼ë¡œ ì§€ì •í•œ ì—¬ëŸ¬ ì»¨íŠ¸ë¡¤ëŸ¬ì— `@ExceptionHandler` , `@InitBinder` ê¸°ëŠ¥ì„ ë¶€ì—¬í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.- `@ControllerAdvice` ì— ëŒ€ìƒì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì— ì ìš©ëœë‹¤. (ê¸€ë¡œë²Œ ì ìš©)- `@RestControllerAdvice` ëŠ” `@ControllerAdvice` ì™€ ê°™ê³ , `@ResponseBody` ê°€ ì¶”ê°€ë˜ì–´ ìˆë‹¤. `@Controller` , `@RestController` ì˜ ì°¨ì´ì™€ ê°™ë‹¤.**ëŒ€ìƒ ì»¨íŠ¸ë¡¤ëŸ¬ ì§€ì • ë°©ë²•**```java// Target all Controllers annotated with @RestController@ControllerAdvice(annotations = RestController.class)public class ExampleAdvice1 {}// Target all Controllers within specific packages@ControllerAdvice("org.example.controllers")public class ExampleAdvice2 {}// Target all Controllers assignable to specific classes@ControllerAdvice(assignableTypes = {ControllerInterface.class, AbstractController.class})public class ExampleAdvice3 {}```- https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-controller-adviceìŠ¤í”„ë§ ê³µì‹ ë¬¸ì„œ ì˜ˆì œì—ì„œ ë³´ëŠ” ê²ƒ ì²˜ëŸ¼ íŠ¹ì • ì• ë…¸í…Œì´ì…˜ì´ ìˆëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì§€ì •í•  ìˆ˜ ìˆê³ , íŠ¹ì • íŒ¨í‚¤ì§€ë¥¼ ì§ì ‘ ì§€ì •í•  ìˆ˜ë„ ìˆë‹¤.íŒ¨í‚¤ì§€ ì§€ì •ì˜ ê²½ìš° í•´ë‹¹ íŒ¨í‚¤ì§€ì™€ ê·¸ í•˜ìœ„ì— ìˆëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ëŒ€ìƒì´ ëœë‹¤.ê·¸ë¦¬ê³  íŠ¹ì • í´ë˜ìŠ¤ë¥¼ ì§€ì •í•  ìˆ˜ë„ ìˆë‹¤.ëŒ€ìƒ ì»¨íŠ¸ë¡¤ëŸ¬ ì§€ì •ì„ ìƒëµí•˜ë©´ ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì— ì ìš©ëœë‹¤.