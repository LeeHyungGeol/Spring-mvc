# 4. ê²€ì¦1 - Validation<br/>## ëª©ì°¨- ê²€ì¦ ìš”êµ¬ì‚¬í•­- ê²€ì¦ ì§ì ‘ ì²˜ë¦¬ - ì†Œê°œ- ê²€ì¦ ì§ì ‘ ì²˜ë¦¬ - ê°œë°œ- BindingResult- FieldError, ObjectError- ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬1<br/><br/><br/>**í˜„ì¬ìƒí™©**![image](https://user-images.githubusercontent.com/83503188/209931233-95a8432d-fd66-4b30-9bda-fd9b9cb4b8d1.png)- ìˆ«ì íƒ€ì…ì´ ì•„ë‹Œ ë¬¸ìê°€ ë“¤ì–´ì˜¤ëŠ” ê²½ìš°![image](https://user-images.githubusercontent.com/83503188/209931250-5461920a-8d6c-4dbe-bfbd-a2158e48ddb1.png)- ì„œë²„ì—ì„œ `NumberFormatException` ë°œìƒ- ì‚¬ìš©ìëŠ” ìì‹ ì´ ì…ë ¥í•œ ë°ì´í„°ë¥¼ ëª¨ë‘ ìƒì–´ë²„ë¦°ë‹¤.- ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ì‚¬ìš©ìì˜ ì…ë ¥ì„ ìœ ì§€í•˜ê³ , ë¬¸ì œê°€ ë°œìƒí•œ ì›ì¸ì„ ì•Œë ¤ì¤˜ì•¼í•œë‹¤.# ğŸ’¡ê²€ì¦ ìš”êµ¬ì‚¬í•­**ìš”êµ¬ì‚¬í•­: ê²€ì¦ ë¡œì§ ì¶”ê°€**- íƒ€ì… ê²€ì¦    - ê°€ê²©, ìˆ˜ëŸ‰ì— ë¬¸ìê°€ ë“¤ì–´ê°€ë©´ ê²€ì¦ ì˜¤ë¥˜ ì²˜ë¦¬- í•„ë“œ ê²€ì¦    - ìƒí’ˆëª…: í•„ìˆ˜, ê³µë°±X    - ê°€ê²©: 1000ì› ì´ìƒ, 1ë°±ë§Œì› ì´í•˜    - ìˆ˜ëŸ‰: ìµœëŒ€ 9999- íŠ¹ì • í•„ë“œì˜ ë²”ìœ„ë¥¼ ë„˜ì–´ì„œëŠ” ê²€ì¦    - ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ 10,000ì› ì´ìƒì›¹ ì„œë¹„ìŠ¤ëŠ” í¼ ì…ë ¥ì‹œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´, ê³ ê°ì´ ì…ë ¥í•œ ë°ì´í„°ë¥¼ ìœ ì§€í•œ ìƒíƒœë¡œ ì–´ë–¤ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ì§€ ì¹œì ˆí•˜ê²Œ ì•Œë ¤ì£¼ì–´ì•¼ í•œë‹¤.<br/>## âš¡ï¸ê²€ì¦ ì •ë¦¬**ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì¤‘ìš”í•œ ì—­í• ì¤‘ í•˜ë‚˜ëŠ” HTTP ìš”ì²­ì´ ì •ìƒì¸ì§€ ê²€ì¦í•˜ëŠ” ê²ƒì´ë‹¤.**> ### ì°¸ê³ : í´ë¼ì´ì–¸íŠ¸ ê²€ì¦, ì„œë²„ ê²€ì¦>> í´ë¼ì´ì–¸íŠ¸ ê²€ì¦ì€ ì¡°ì‘í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë³´ì•ˆì— ì·¨ì•½í•˜ë‹¤.(ì„œë²„ë¡œ ì§ì ‘ API ìš”ì²­) ë˜í•œ ì„œë²„ë§Œìœ¼ë¡œ ê²€ì¦í•˜ë©´, ì¦‰ê°ì ì¸ ê³ ê° ì‚¬ìš©ì„±ì´ ë¶€ì¡±í•´ì§„ë‹¤.  > > **ë”°ë¼ì„œ ë‘˜ì„ ì ì ˆíˆ ì„ì–´ì„œ ì‚¬ìš©í•˜ë˜, ìµœì¢…ì ìœ¼ë¡œ ì„œë²„ ê²€ì¦ì€ í•„ìˆ˜ì´ë‹¤.**>> API ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ API ìŠ¤í™ì„ ì˜ ì •ì˜í•´ì„œ ê²€ì¦ ì˜¤ë¥˜ë¥¼ API ì‘ë‹µ ê²°ê³¼ì— ì˜ ë‚¨ê²¨ì£¼ì–´ì•¼ í•œë‹¤.<br/><br/><br/># ğŸ’¡ê²€ì¦ ì§ì ‘ ì²˜ë¦¬ - ì†Œê°œ**ìƒí’ˆ ì €ì¥ ì„±ê³µ**![image](https://user-images.githubusercontent.com/83503188/209931004-347b05b6-3670-4712-b460-1054df2f9e22.png)- ì‚¬ìš©ìê°€ ìƒí’ˆ ë“±ë¡ í¼ì—ì„œ ì •ìƒ ë²”ìœ„ì˜ ë°ì´í„°ë¥¼ ì…ë ¥í•˜ë©´, ì„œë²„ì—ì„œëŠ” ê²€ì¦ ë¡œì§ì´ í†µê³¼í•˜ê³ , ìƒí’ˆì„ ì €ì¥í•˜ê³ , ìƒí’ˆ ìƒì„¸ í™”ë©´ìœ¼ë¡œ redirectí•œë‹¤.**ìƒí’ˆ ì €ì¥ ê²€ì¦ ì‹¤íŒ¨**![image](https://user-images.githubusercontent.com/83503188/209932012-1d10e2cd-3a23-43d5-90d8-13ebda965e55.png)- ê³ ê°ì´ ìƒí’ˆ ë“±ë¡ í¼ì—ì„œ ìƒí’ˆëª…ì„ ì…ë ¥í•˜ì§€ ì•Šê±°ë‚˜, ê°€ê²©, ìˆ˜ëŸ‰ ë“±ì´ ë„ˆë¬´ ì‘ê±°ë‚˜ ì»¤ì„œ ê²€ì¦ ë²”ìœ„ë¥¼ ë„˜ì–´ì„œë©´, ì„œë²„ ê²€ì¦ ë¡œì§ì´ ì‹¤íŒ¨í•´ì•¼ í•œë‹¤.- ì´ë ‡ê²Œ ê²€ì¦ì— ì‹¤íŒ¨í•œ ê²½ìš° ê³ ê°ì—ê²Œ ë‹¤ì‹œ ìƒí’ˆ ë“±ë¡ í¼ì„ ë³´ì—¬ì£¼ê³ , ì–´ë–¤ ê°’ì„ ì˜ëª» ì…ë ¥í–ˆëŠ”ì§€ ì¹œì ˆí•˜ê²Œ ì•Œë ¤ì£¼ì–´ì•¼ í•œë‹¤.<br/><br/><br/># ğŸ’¡ê²€ì¦ ì§ì ‘ ì²˜ë¦¬ - ê°œë°œ**ValidationItemControllerV1 - addItem() ìˆ˜ì •**```java   @PostMapping("/add")    public String addItem(@ModelAttribute Item item, RedirectAttributes redirectAttributes, Model model) {        // ê²€ì¦ ì˜¤ë¥˜ ê²°ê³¼ë¥¼ ë³´ê´€        Map<String, String> errors = new HashMap<>();        // ê²€ì¦ ë¡œì§        if (!StringUtils.hasText(item.getItemName())) {            errors.put("itemName", "ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");        }        if (item.getPrice() == null || item.getPrice() < 1000 || item.getPrice() > 1000000) {            errors.put("price", "ê°€ê²©ì€ 1,00 ~ 1,000,000 ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.");        }        if (item.getQuantity() == null || item.getQuantity() >= 9999) {            errors.put("quantity", "ìˆ˜ëŸ‰ì€ ìµœëŒ€ 9,999 ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.");        }        //íŠ¹ì • í•„ë“œê°€ ì•„ë‹Œ ë³µí•© ë£° ê²€ì¦        if (item.getPrice() != null && item.getQuantity() != null) {            int resultPrice = item.getPrice() * item.getQuantity();            if (resultPrice < 10000) {                errors.put("globalError", "ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ 10,000ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = " + resultPrice);            }        }                // ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ        if (!errors.isEmpty()) {            model.addAttribute("errors", errors);            return "validation/v1/addForm";        }        // ì„±ê³µ ë¡œì§        Item savedItem = itemRepository.save(item);        redirectAttributes.addAttribute("itemId", savedItem.getId());        redirectAttributes.addAttribute("status", true);        return "redirect:/validation/v1/items/{itemId}";    }```**íŠ¹ì • í•„ë“œì˜ ë²”ìœ„ë¥¼ ë„˜ì–´ì„œëŠ” ê²€ì¦ ë¡œì§**```java        //íŠ¹ì • í•„ë“œê°€ ì•„ë‹Œ ë³µí•© ë£° ê²€ì¦        if (item.getPrice() != null && item.getQuantity() != null) {            int resultPrice = item.getPrice() * item.getQuantity();            if (resultPrice < 10000) {                errors.put("globalError", "ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ 10,000ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = " + resultPrice);            }        }```- íŠ¹ì • í•„ë“œë¥¼ ë„˜ì–´ì„œëŠ” ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•´ì•¼ í•  ìˆ˜ë„ ìˆë‹¤. ì´ë•ŒëŠ” í•„ë“œ ì´ë¦„ì„ ë„£ì„ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ `globalError` ë¼ëŠ” `key` ë¥¼ ì‚¬ìš©í•œë‹¤.<details><summary>addForm.html</summary><div markdown="1">## **addForm.html**```html<!DOCTYPE HTML><html xmlns:th="http://www.thymeleaf.org"><head>    <meta charset="utf-8">    <link th:href="@{/css/bootstrap.min.css}"          href="../css/bootstrap.min.css" rel="stylesheet">    <style>        .container {            max-width: 560px;        }        .field-error {            border-color: #dc3545;            color: #dc3545;        }    </style></head><body><div class="container">    <div class="py-5 text-center">        <h2 th:text="#{page.addItem}">ìƒí’ˆ ë“±ë¡</h2>    </div>    <form action="item.html" th:action th:object="${item}" method="post">        <div th:if="${errors?.containsKey('globalError')}">            <p class="field-error" th:text="${errors['globalError']}">ì „ì²´ ì˜¤ë¥˜ ë©”ì‹œì§€</p>        </div>        <div>            <label for="itemName" th:text="#{label.item.itemName}">ìƒí’ˆëª…</label>            <input type="text" id="itemName" th:field="*{itemName}"                   th:class="${errors?.containsKey('itemName')} ? 'form-control field-error' : 'form-control'"                   class="form-control" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">            <div class="field-error" th:if="${errors?.containsKey('itemName')}" th:text="${errors['itemName']}">                ìƒí’ˆëª… ì˜¤ë¥˜            </div>        </div>        <div>            <label for="price" th:text="#{label.item.price}">ê°€ê²©</label>            <input type="text" id="price" th:field="*{price}"                   th:class="${errors?.containsKey('price')} ? 'form-control field-error' : 'form-control'"                   class="form-control" placeholder="ê°€ê²©ì„ ì…ë ¥í•˜ì„¸ìš”">            <div class="field-error" th:if="${errors?.containsKey('price')}" th:text="${errors['price']}">                ê°€ê²© ì˜¤ë¥˜            </div>        </div>        <div>            <label for="quantity" th:text="#{label.item.quantity}">ìˆ˜ëŸ‰</label>            <input type="text" id="quantity" th:field="*{quantity}"                   th:class="${errors?.containsKey('quantity')} ? 'form-control field-error' : 'form-control'"                   class="form-control" placeholder="ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”">            <div class="field-error" th:if="${errors?.containsKey('quantity')}" th:text="${errors['quantity']}">                ìˆ˜ëŸ‰ ì˜¤ë¥˜            </div>        </div>        <hr class="my-4">        <div class="row">            <div class="col">                <button class="w-100 btn btn-primary btn-lg" type="submit" th:text="#{button.save}">ìƒí’ˆ ë“±ë¡</button>            </div>            <div class="col">                <button class="w-100 btn btn-secondary btn-lg"                        onclick="location.href='items.html'"                        th:onclick="|location.href='@{/validation/v1/items}'|"                        type="button" th:text="#{button.cancel}">ì·¨ì†Œ</button>            </div>        </div>    </form></div> <!-- /container --></body></html>```</div></details><br/><br/>## **âš¡ï¸ê¸€ë¡œë²Œ ì˜¤ë¥˜ ë©”ì‹œì§€**```html<div th:if="${errors?.containsKey('globalError')}"><p class="field-error" th:text="${errors['globalError']}">ì „ì²´ ì˜¤ë¥˜ ë©”ì‹œì§€</p></div>```> ì°¸ê³  Safe Navigation Operator -> ?>> `errors?.` ì€ `errors` ê°€ `null` ì¼ë•Œ `NullPointerException` ì´ ë°œìƒí•˜ëŠ” ëŒ€ì‹ , `null` ì„ ë°˜í™˜í•˜ëŠ” ë¬¸ë²•ì´ë‹¤.> `th:if` ì—ì„œ `null` ì€ ì‹¤íŒ¨ë¡œ ì²˜ë¦¬ë˜ë¯€ë¡œ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤.<br/>## **âš¡ï¸í•„ë“œ ì˜¤ë¥˜ ì²˜ë¦¬**```html<input type="text" th:classappend="${errors?.containsKey('itemName')} ? 'field-error': _" class="form-control">```- `classappend` ë¥¼ ì‚¬ìš©í•´ì„œ í•´ë‹¹ í•„ë“œì— ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ `field-error` ë¼ëŠ” í´ë˜ìŠ¤ ì •ë³´ë¥¼ ë”í•´ì„œ í¼ì˜ ìƒ‰ê¹”ì„ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ê°•ì¡°í•œë‹¤.- ë§Œì•½ ê°’ì´ ì—†ìœ¼ë©´ `_` (No-Operation)ì„ ì‚¬ìš©í•´ì„œ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠëŠ”ë‹¤.```html<input type="text" class="form-control field-error">```<br/>## **âš¡ï¸í•„ë“œ ì˜¤ë¥˜ ì²˜ë¦¬ - ë©”ì‹œì§€**```html<div class="field-error" th:if="${errors?.containsKey('itemName')}" th:text="${errors['itemName']}">    ìƒí’ˆëª… ì˜¤ë¥˜</div>```<br/>**ê²°ê³¼**![image](https://user-images.githubusercontent.com/83503188/209934492-3b9b7167-3df0-473f-abbb-ad1a94332c46.png)**ë‚¨ì€ ë¬¸ì œì **![image](https://user-images.githubusercontent.com/83503188/209935820-c8176945-854a-4d68-8357-1b9cf0419ea1.png)- ë·° í…œí”Œë¦¿ì—ì„œ ì¤‘ë³µ ì²˜ë¦¬ê°€ ë§ë‹¤. ë­”ê°€ ë¹„ìŠ·í•˜ë‹¤.![image](https://user-images.githubusercontent.com/83503188/209935966-ede9d90e-1d5d-4d1a-b188-b1e9ed76d301.png)- íƒ€ì… ì˜¤ë¥˜ ì²˜ë¦¬ê°€ ì•ˆëœë‹¤. ìˆ«ì íƒ€ì…ì— ë¬¸ìê°€ ë“¤ì–´ì˜¤ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.ê·¸ëŸ°ë° ì´ëŸ¬í•œ ì˜¤ë¥˜ëŠ” ìŠ¤í”„ë§MVCì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì§„ì…í•˜ê¸°ë„ ì „ì— (Item ê°ì²´ì— ê°’ì´ ë°”ì¸ë”©ì´ ì•ˆëœë‹¤.) ì˜ˆì™¸ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì—, ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í˜¸ì¶œë˜ì§€ë„ ì•Šê³ , 400 ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ì„œ ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ë„ì›Œì¤€ë‹¤.Item ì˜ price ì— ë¬¸ìë¥¼ ì…ë ¥í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ íƒ€ì… ì˜¤ë¥˜ê°€ ë°œìƒí•´ë„ ê³ ê°ì´ ì…ë ¥í•œ ë¬¸ìë¥¼ í™”ë©´ì— ë‚¨ê²¨ì•¼ í•œë‹¤. ë§Œì•½ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í˜¸ì¶œëœë‹¤ê³  ê°€ì •í•´ë„ Item ì˜ price ëŠ” Integer ì´ë¯€ë¡œ ë¬¸ìë¥¼ ë³´ê´€í•  ìˆ˜ê°€ ì—†ë‹¤.ê²°êµ­ ë¬¸ìëŠ” ë°”ì¸ë”©ì´ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ ê³ ê°ì´ ì…ë ¥í•œ ë¬¸ìê°€ ì‚¬ë¼ì§€ê²Œ ë˜ê³ , ê³ ê°ì€ ë³¸ì¸ì´ ì–´ë–¤ ë‚´ìš©ì„ ì…ë ¥í•´ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ì§€ ì´í•´í•˜ê¸° ì–´ë µë‹¤.ê²°êµ­ ê³ ê°ì´ ì…ë ¥í•œ ê°’ë„ ì–´ë”˜ê°€ì— ë³„ë„ë¡œ ê´€ë¦¬ê°€ ë˜ì–´ì•¼ í•œë‹¤.<br/><br/><br/># ğŸ’¡BindingResult<details><summary>ValidationItemControllerV2 - addItemV1</summary>## **ValidationItemControllerV2 - addItemV1**```java@PostMapping("/add")    public String addItemV1(@ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {        if (!StringUtils.hasText(item.getItemName())) {            bindingResult.addError(new FieldError("item", "itemName", "ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤."));        }        if (item.getPrice() == null || item.getPrice() < 1000 || item.getPrice() > 1000000) {            bindingResult.addError(new FieldError("item", "price", "ê°€ê²©ì€ 1,000 ~ 1,000,000 ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤."));        }        if (item.getQuantity() == null || item.getQuantity() >= 9999) {            bindingResult.addError(new FieldError("item", "quantity", "ìˆ˜ëŸ‰ì€ ìµœëŒ€ 9,999 ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤."));        }        //íŠ¹ì • í•„ë“œê°€ ì•„ë‹Œ ë³µí•© ë£° ê²€ì¦        if (item.getPrice() != null && item.getQuantity() != null) {            int resultPrice = item.getPrice() * item.getQuantity();            if (resultPrice < 10000) {                bindingResult.addError(new ObjectError("item", "ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ 10,000ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = " + resultPrice));            }        }        // ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ        if (bindingResult.hasErrors()) {            return "validation/v2/addForm";        }        // ì„±ê³µ ë¡œì§        Item savedItem = itemRepository.save(item);        redirectAttributes.addAttribute("itemId", savedItem.getId());        redirectAttributes.addAttribute("status", true);        return "redirect:/validation/v2/items/{itemId}";    }```</details>## âš¡ï¸BindingResult íŒŒë¼ë¯¸í„° ìœ„ì¹˜`BindingResult bindingResult` íŒŒë¼ë¯¸í„° ìœ„ì¹˜ëŠ” `@ModelAttribte Item item` ë‹¤ìŒì— ì™€ì•¼ í•œë‹¤.<br/>## **âš¡ï¸FieldError ìƒì„±ì ìš”ì•½**```javapublic FieldError(String objectName, String field, String defaultMessage) {}```í•„ë“œì— ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ `FieldError` ê°ì²´ë¥¼ ìƒì„±í•´ì„œ `bindingResult` ì— ë‹´ì•„ë‘ë©´ ëœë‹¤.- `objectName` : `@ModelAttribute` ì´ë¦„ -> item- `field` : ì˜¤ë¥˜ê°€ ë°œìƒí•œ í•„ë“œ ì´ë¦„ -> itemName- `defaultMessage` : ì˜¤ë¥˜ ê¸°ë³¸ ë©”ì‹œì§€ -> "ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤."<br/>## **âš¡ï¸ObjectError ìƒì„±ì ìš”ì•½**```javapublic ObjectError(String objectName, String defaultMessage) {}```íŠ¹ì • í•„ë“œë¥¼ ë„˜ì–´ì„œëŠ” ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ `ObjectError` ê°ì²´ë¥¼ ìƒì„±í•´ì„œ `bindingResult` ì— ë‹´ì•„ë‘ë©´ ëœë‹¤.- `objectName` : `@ModelAttribute` ì˜ ì´ë¦„- `defaultMessage` : ì˜¤ë¥˜ ê¸°ë³¸ ë©”ì‹œì§€<br/><br/><details><summary>validation/v2/addForm.html</summary>## `validation/v2/addForm.html````html        <div th:if="${#fields.hasGlobalErrors()}">            <p class="field-error" th:each="err : ${#fields.globalErrors()}" th:text="${err}">ê¸€ë¡œë²Œ ì˜¤ë¥˜ ë©”ì‹œì§€</p>        </div>        <div>            <label for="itemName" th:text="#{label.item.itemName}">ìƒí’ˆëª…</label>            <input type="text" id="itemName" th:field="*{itemName}"                   th:errorclass="field-error" class="form-control" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">            <div class="field-error" th:errors="*{itemName}">                ìƒí’ˆëª… ì˜¤ë¥˜            </div>        </div>        <div>            <label for="price" th:text="#{label.item.price}">ê°€ê²©</label>            <input type="text" id="price" th:field="*{price}" th:errorclass="field-error" class="form-control" placeholder="ê°€ê²©ì„ ì…ë ¥í•˜ì„¸ìš”">            <div class="field-error" th:errors="*{price}">                ê°€ê²© ì˜¤ë¥˜            </div>        </div>        <div>            <label for="quantity" th:text="#{label.item.quantity}">ìˆ˜ëŸ‰</label>            <input type="text" id="quantity" th:field="*{quantity}" th:errorclass="field-error" class="form-control"                   placeholder="ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”">            <div class="field-error" th:errors="*{quantity}">                ìˆ˜ëŸ‰ ì˜¤ë¥˜            </div>        </div>```</details>## **âš¡ï¸íƒ€ì„ë¦¬í”„ ìŠ¤í”„ë§ ê²€ì¦ ì˜¤ë¥˜ í†µí•© ê¸°ëŠ¥**- `#fields` : `#fields` ë¡œ `BindingResult` ê°€ ì œê³µí•˜ëŠ” ê²€ì¦ ì˜¤ë¥˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.- `th:errors` : í•´ë‹¹ í•„ë“œì— ì˜¤ë¥˜ê°€ ìˆëŠ” ê²½ìš°ì— íƒœê·¸ë¥¼ ì¶œë ¥í•œë‹¤. `th:if` ì˜ í¸ì˜ ë²„ì „ì´ë‹¤.- `th:errorclass` : `th:field` ì—ì„œ ì§€ì •í•œ í•„ë“œì— ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ `class` ì •ë³´ë¥¼ ì¶”ê°€í•œë‹¤.<br/><br/><br/>## **âš¡ï¸BindingResult ì— ëŒ€í•´ì„œ****`BindingResult`ëŠ” ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ê²€ì¦ ì˜¤ë¥˜ë¥¼ ë³´ê´€í•˜ëŠ” ê°ì²´ì´ë‹¤.**> **ê²€ì¦ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ì—¬ê¸°ì— ë³´ê´€í•˜ë©´ ëœë‹¤.**> - `BindingResult`ê°€ ìˆìœ¼ë©´ `@ModelAttribute` ì— ë°ì´í„° ë°”ì¸ë”© ì‹œ ì˜¤ë¥˜ê°€ ë°œìƒí•´ë„ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í˜¸ì¶œëœë‹¤!> - `BindingResult` ëŠ” Model ì— ìë™ìœ¼ë¡œ í¬í•¨ëœë‹¤.> - BindingResult` ëŠ” ê²€ì¦í•  ëŒ€ìƒ ë°”ë¡œ ë‹¤ìŒì— ì™€ì•¼í•œë‹¤. ìˆœì„œê°€ ì¤‘ìš”í•˜ë‹¤.>   - ì˜ˆë¥¼ ë“¤ì–´ì„œ `@ModelAttribute Item item` , ë°”ë¡œ ë‹¤ìŒì— `BindingResult` ê°€ ì™€ì•¼ í•œë‹¤.### **ì˜ˆ) @ModelAttribute ì— ë°”ì¸ë”© ì‹œ íƒ€ì… ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´?**- `BindingResult` ê°€ ì—†ìœ¼ë©´ 400 ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í˜¸ì¶œë˜ì§€ ì•Šê³ , ì˜¤ë¥˜ í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤.- `BindingResult` ê°€ ìˆìœ¼ë©´ ì˜¤ë¥˜ ì •ë³´( `FieldError` )ë¥¼ `BindingResult` ì— ë‹´ì•„ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì •ìƒ í˜¸ì¶œí•œë‹¤.### **BindingResult ì™€ Errors** - `org.springframework.validation.Errors` - `org.springframework.validation.BindingResult ``BindingResult` ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ê³ , `Errors` ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ê³  ìˆë‹¤. ì‹¤ì œ ë„˜ì–´ì˜¤ëŠ” êµ¬í˜„ì²´ëŠ” `BeanPropertyBindingResult` ë¼ëŠ” ê²ƒì¸ë°, ë‘˜ë‹¤ êµ¬í˜„í•˜ê³  ìˆìœ¼ë¯€ë¡œ `BindingResult` ëŒ€ì‹ ì— `Errors` ë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤.  `Errors` ì¸í„°í˜ì´ìŠ¤ëŠ” ë‹¨ìˆœí•œ ì˜¤ë¥˜ ì €ì¥ê³¼ ì¡°íšŒ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. `BindingResult` ëŠ” ì—¬ê¸°ì— ë”í•´ì„œ ì¶”ê°€ì ì¸ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•œë‹¤. `addError()` ë„ `BindingResult` ê°€ ì œê³µí•˜ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” `BindingResult` ë¥¼ ì‚¬ìš©í•˜ì. ì£¼ë¡œ ê´€ë¡€ìƒ `BindingResult` ë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤.<br/><br/>## **âš¡ï¸BindingResultì— ê²€ì¦ ì˜¤ë¥˜ë¥¼ ì ìš©í•˜ëŠ” 3ê°€ì§€ ë°©ë²•**1. `@ModelAttribute` ì˜ ê°ì²´ì— íƒ€ì… ì˜¤ë¥˜ ë“±ìœ¼ë¡œ ë°”ì¸ë”©ì´ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš° ìŠ¤í”„ë§ì´ `FieldError` ìƒì„±í•´ì„œ`BindingResult` ì— ë„£ì–´ì¤€ë‹¤.2. ê°œë°œìê°€ ì§ì ‘ ë„£ì–´ì¤€ë‹¤.3. `Validator` ì‚¬ìš©**íƒ€ì… ì˜¤ë¥˜ í™•ì¸**![image](https://user-images.githubusercontent.com/83503188/209939005-3b93007d-1611-47bd-90bd-82cb0c514b74.png)**ë‚¨ì€ë¬¸ì œ**![image](https://user-images.githubusercontent.com/83503188/209940655-b3337395-9cf1-46bb-ac1c-4405152b11cd.png)  ![image](https://user-images.githubusercontent.com/83503188/209940662-2f73b9f0-92c9-4f5b-ac3c-f62c6ada56f5.png)ê·¸ëŸ°ë° ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²½ìš° ê³ ê°ì´ ì…ë ¥í•œ ë‚´ìš©ì´ ëª¨ë‘ ì‚¬ë¼ì§„ë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•´ë³´ì.<br/><br/><br/># ğŸ’¡FieldError, ObjectError**ëª©í‘œ**ì‚¬ìš©ì ì…ë ¥ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í™”ë©´ì— ë‚¨ë„ë¡ í•˜ì.- ì˜ˆ) ê°€ê²©ì„ 1000ì› ë¯¸ë§Œìœ¼ë¡œ ì„¤ì •ì‹œ ì…ë ¥í•œ ê°’ì´ ë‚¨ì•„ìˆì–´ì•¼ í•œë‹¤.<details><summary>ValidationItemControllerV2 - addItemV2</summary>## **ValidationItemControllerV2 - addItemV2**```java@PostMapping("/add")public String addItemV2(@ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes) {    if (!StringUtils.hasText(item.getItemName())) {        bindingResult.addError(new FieldError("item", "itemName",                item.getItemName(), false, null, null, "ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤."));    }    if (item.getPrice() == null || item.getPrice() < 1000 || item.getPrice() > 1000000) {        bindingResult.addError(new FieldError("item", "price",                item.getPrice(), false, null, null, "ê°€ê²©ì€ 1,000 ~ 1,000,000 ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤."));    }    if (item.getQuantity() == null || item.getQuantity() >= 9999) {        bindingResult.addError(new FieldError("item", "quantity",                item.getQuantity(), false, null, null, "ìˆ˜ëŸ‰ì€ ìµœëŒ€ 9,999 ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤."));    }    //íŠ¹ì • í•„ë“œê°€ ì•„ë‹Œ ë³µí•© ë£° ê²€ì¦    if (item.getPrice() != null && item.getQuantity() != null) {        int resultPrice = item.getPrice() * item.getQuantity();        if (resultPrice < 10000) {            bindingResult.addError(new ObjectError("item", null, null, "ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ 10,000ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = " + resultPrice));        }    }    // ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ    if (bindingResult.hasErrors()) {        return "validation/v2/addForm";    }    // ì„±ê³µ ë¡œì§    Item savedItem = itemRepository.save(item);    redirectAttributes.addAttribute("itemId", savedItem.getId());    redirectAttributes.addAttribute("status", true);    return "redirect:/validation/v2/items/{itemId}";}```</details>## âš¡ï¸**FieldError ìƒì„±ì**```javabindingResult.addError(new FieldError("item", "itemName", item.getItemName(), false, null, null, "ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤."));``````javapublic FieldError(String objectName, String field, String defaultMessage);public FieldError(String objectName, String field, @Nullable Object rejectedValue, boolean bindingFailure, @Nullable String[] codes, @NullableObject[] arguments, @Nullable String defaultMessage)```- `objectName` : ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê°ì²´ ì´ë¦„- `field` : ì˜¤ë¥˜ í•„ë“œ- `rejectedValue` : ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê°’(ê±°ì ˆëœ ê°’)- `bindingFailure` : íƒ€ì… ì˜¤ë¥˜ ê°™ì€ ë°”ì¸ë”© ì‹¤íŒ¨ì¸ì§€, ê²€ì¦ ì‹¤íŒ¨ì¸ì§€ êµ¬ë¶„ ê°’- `codes` : ë©”ì‹œì§€ ì½”ë“œ- `arguments` : ë©”ì‹œì§€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì¸ì- `defaultMessage` : ê¸°ë³¸ ì˜¤ë¥˜ ë©”ì‹œì§€`rejectedValue` ê°€ ë°”ë¡œ ì˜¤ë¥˜ ë°œìƒì‹œ ì‚¬ìš©ì ì…ë ¥ ê°’ì„ ì €ì¥í•˜ëŠ” í•„ë“œë‹¤. `bindingFailure` ëŠ” íƒ€ì… ì˜¤ë¥˜ ê°™ì€ ë°”ì¸ë”©ì´ ì‹¤íŒ¨í–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ì ì–´ì£¼ë©´ ëœë‹¤. ì—¬ê¸°ì„œëŠ” ë°”ì¸ë”©ì´ ì‹¤íŒ¨í•œ ê²ƒì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— `false` ë¥¼ ì‚¬ìš©<br/>## **âš¡ï¸íƒ€ì„ë¦¬í”„ì˜ ì‚¬ìš©ì ì…ë ¥ ê°’ ìœ ì§€**- `th:field="*{price}"`- ì •ìƒ ìƒí™©ì—ëŠ” ëª¨ë¸ ê°ì²´ì˜ ê°’ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ `FieldError` ì—ì„œ ë³´ê´€í•œ ê°’( `item.getItemName()`, `item.getPrice()`, ...)ì„ ì‚¬ìš©í•´ì„œ ê°’ì„ ì¶œë ¥í•œë‹¤.<br/>## **âš¡ï¸ìŠ¤í”„ë§ì˜ ë°”ì¸ë”© ì˜¤ë¥˜ ì²˜ë¦¬**![image](https://user-images.githubusercontent.com/83503188/209942199-2cbab0da-af22-4175-9076-4c50ebec76ee.png)íƒ€ì… ì˜¤ë¥˜ë¡œ ë°”ì¸ë”©ì— ì‹¤íŒ¨í•˜ë©´ **ìŠ¤í”„ë§ì€ `FieldError` ë¥¼ ìƒì„±í•˜ë©´ì„œ ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê°’ì„ ë„£ì–´ë‘”ë‹¤.**ê·¸ë¦¬ê³  í•´ë‹¹ ì˜¤ë¥˜ë¥¼ `BindingResult` ì— ë‹´ì•„ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•œë‹¤. ë”°ë¼ì„œ íƒ€ì… ì˜¤ë¥˜ ê°™ì€ ë°”ì¸ë”© ì‹¤íŒ¨ì‹œì—ë„ ì‚¬ìš©ìì˜ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì •ìƒ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤.`bindingResult.addError(new FieldError("item", "price", "qqqq", true, null, null, "..."));`- ìŠ¤í”„ë§ì´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•  ë•Œ ë°”ì¸ë”©ì— ì‹¤íŒ¨í•˜ë©´ ì•Œì•„ì„œ `BindingResult` ì— ë‹´ì•„ì¤€ë‹¤.**ê²°ê³¼**![image](https://user-images.githubusercontent.com/83503188/209941517-afae1250-4e94-403c-bc05-0b9b87bbdeab.png)<br/><br/>## â­ï¸íƒ€ì… ë¯¸ìŠ¤ë§¤ì¹˜ ì—ëŸ¬ê°€ ìˆì„ ë•Œ<img src="https://github.com/LeeHyungGeol/Algorithm_BaekJoon/assets/56071088/4ff76cbe-8fb5-47e2-b40b-bfba268c9056" width="600" height="400" alt="">![bindirResultFieldErrorLog](https://github.com/LeeHyungGeol/Algorithm_BaekJoon/assets/56071088/57f05c2f-00b2-42c8-92e1-e39bbf9eb5ba)í˜„ì¬ ê°™ì€ ì˜¤ë¥˜ê°€ 2ê°œ ìˆìŠµë‹ˆë‹¤.**í•˜ë‚˜ëŠ” ìŠ¤í”„ë§ì´ ë§Œë“¤ì–´ì£¼ëŠ” typeMismatch ì˜¤ë¥˜, ê°œë°œìê°€ ë§Œë“  ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì—ì„œ ì§ì ‘ ì‘ì„±í•œ FieldError ì…ë‹ˆë‹¤.**ìŠ¤í”„ë§ì´ ë§Œë“¤ì–´ì£¼ëŠ” FieldError ì—ì„œ rejectedvalue ì— ê³ ê°ì´ ì…ë ¥í•œ ë°ì´í„° itemName ì„ ë„£ì–´ì£¼ê³ , ì´ ê°’ì´ ì¶œë ¥ë©ë‹ˆë‹¤. ìŠ¤í”„ë§ì€ ë‚´ë¶€ì—ì„œ íƒ€ì…ì„ ë³€í™˜í•´ì„œ typeMismatch ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê¸°ì „, ê·¸ëŸ¬ë‹ˆê¹Œ HTTP ì „ì†¡ì„ í†µí•´ ë„˜ì–´ì˜¨ itemName ë°ì´í„°ë¥¼ ì•Œê³  ìˆìŠµë‹ˆë‹¤.ê·¸ë¦¬ê³ , **2ê°€ì§€ ì˜¤ë¥˜ë¥¼ ëª¨ë‘ ì¶œë ¥í•©ë‹ˆë‹¤.**ë˜í•œ, addItem(), addItemV1(), addItemV2() ê¹Œì§€ ëª¨ë‘ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ìƒí™©ì—ì„œ addFormìœ¼ë¡œ ëŒì•„ê°ˆ ë•Œ modelì— ì‹¤íŒ¨í•˜ëŠ” ê°’ë“¤ì„ ê°–ê³  ìˆê¸°ëŠ” í–ˆìŠµë‹ˆë‹¤.addItemV1()ì—ì„œ itemName, price, quantity ëª¨ë‘ ê°’ 2ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ”ë°ìš”.ValidationItemControllerV2ë¡œ ë³€ê²½ë˜ë©´ì„œ ì¶”ê°€ëœê²Œ BindingResultì¸ ë§Œí¼ BindingResultì˜ êµ¬í˜„ì²´ì—ì„œ ê°’ì„ ë®ì–´ì”Œìš°ì§€ ì•Šë‚˜ ì˜ˆìƒí•©ë‹ˆë‹¤.addItemV1()ì—ì„œ ìƒì„±í•˜ëŠ” FieldErrorëŠ” ë‹¤ìŒê³¼ ê°™ì´ rejectValueê°€ Nullë¡œ ìê¸° ìì‹ ì„ í˜¸ì¶œí•˜ëŠ”ë°,rejectValueê°€ nullì¸ ìƒíƒœì—ì„œ addErrorì˜ ë¡œì§ì—ì„œ ê¸°ì¡´ modelì˜ itemì— ìˆëŠ” ë°ì´í„°ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤ê±°ë‚˜, ë®ì–´ì”Œìš°ëŠ” ë“±ì˜ ì²˜ë¦¬ë¡œ ì¸í•´ ë°œìƒí•˜ì§€ ì•Šë‚˜ ì˜ˆìƒë˜ë„¤ìš”.**ì°¸ê³ **- https://www.inflearn.com/questions/309088- https://www.inflearn.com/questions/703454<br/><br/><br/># ğŸ’¡ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬1## **âš¡ï¸FieldError ìƒì„±ì**```javapublic FieldError(String objectName, String field, String defaultMessage);public FieldError(String objectName, String field, @Nullable Object rejectedValue, boolean bindingFailure, @Nullable String[] codes, @NullableObject[] arguments, @Nullable String defaultMessage)````FieldError` , `ObjectError` ì˜ ìƒì„±ìëŠ” `codes` , `arguments` ë¥¼ ì œê³µí•œë‹¤. ì´ê²ƒì€ ì˜¤ë¥˜ ë°œìƒì‹œ ì˜¤ë¥˜ ì½”ë“œë¡œ ë©”ì‹œì§€ë¥¼ ì°¾ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.```java//range.item.price=ê°€ê²©ì€ {0} ~ {1} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.bindingResult.addError(new FieldError("item", "price", item.getPrice(), false, new String[]{"range.item.price",  "required.default"}, new Object[]{1000, 1000000}, null));```- `codes` : `required.item.itemName` ë¥¼ ì‚¬ìš©í•´ì„œ ë©”ì‹œì§€ ì½”ë“œë¥¼ ì§€ì •í•œë‹¤. ë©”ì‹œì§€ ì½”ë“œëŠ” í•˜ë‚˜ê°€ ì•„ë‹ˆë¼ ë°°ì—´ë¡œ ì—¬ëŸ¬ ê°’ì„ ì „ë‹¬í•  ìˆ˜ ìˆëŠ”ë°, ìˆœì„œëŒ€ë¡œ ë§¤ì¹­í•´ì„œ ì²˜ìŒ ë§¤ì¹­ë˜ëŠ” ë©”ì‹œì§€ê°€ ì‚¬ìš©ëœë‹¤.  - `item.getPrice(), false, new String[]{"required.item.price", "required.default"}, null, null));`: `required.item.price` ë¥¼ ëª»ì°¾ìœ¼ë©´ `required.default` ì‚¬ìš©  - `required.default` ì¡°ì°¨ ì—†ìœ¼ë©´ ì˜¤ë¥˜ ë°œìƒ- `arguments` : `Object[]{1000, 1000000}` ë¥¼ ì‚¬ìš©í•´ì„œ ì½”ë“œì˜ `{0}` , `{1}` ë¡œ ì¹˜í™˜í•  ê°’ì„ ì „ë‹¬í•œë‹¤.<br/><br/>**errors ë©”ì‹œì§€ íŒŒì¼ ìƒì„±**ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ êµ¬ë¶„í•˜ê¸° ì‰½ê²Œ `errors.properties` ë¼ëŠ” ë³„ë„ì˜ íŒŒì¼ë¡œ ê´€ë¦¬**ìŠ¤í”„ë§ ë¶€íŠ¸ ë©”ì‹œì§€ ì„¤ì • ì¶”ê°€**`application.properties````propertiesspring.messages.basename=messages,errors```**errors.properties ì¶”ê°€**`src/main/resources/errors.properties````propertiesrequired.item.itemName=ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.range.item.price=ê°€ê²©ì€ {0} ~ {1} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.max.item.quantity=ìˆ˜ëŸ‰ì€ ìµœëŒ€ {0} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.totalPriceMin=ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ {0}ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = {1}```> ì°¸ê³ : errors_en.properties íŒŒì¼ì„ ìƒì„±í•˜ë©´ ì˜¤ë¥˜ ë©”ì‹œì§€ë„ êµ­ì œí™” ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.<br/><details><summary>ValidationItemControllerV2 - addItemV3() ì¶”ê°€</summary>## **ValidationItemControllerV2 - addItemV3() ì¶”ê°€**```java@PostMapping("/add")public String addItemV3(@ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes) {    if (!StringUtils.hasText(item.getItemName())) {        bindingResult.addError(new FieldError("item", "itemName",                item.getItemName(), false, new String[]{"required.item.itemName"}, null, null));    }    if (item.getPrice() == null || item.getPrice() < 1000 || item.getPrice() > 1000000) {        bindingResult.addError(new FieldError("item", "price",                item.getPrice(), false, new String[]{"range.item.price"}, new Object[]{1000, 1000000}, null));    }    if (item.getQuantity() == null || item.getQuantity() >= 9999) {        bindingResult.addError(new FieldError("item", "quantity",                item.getQuantity(), false, new String[]{"max.item.quantity"}, new Object[]{9999}, null));    }    //íŠ¹ì • í•„ë“œê°€ ì•„ë‹Œ ë³µí•© ë£° ê²€ì¦    if (item.getPrice() != null && item.getQuantity() != null) {        int resultPrice = item.getPrice() * item.getQuantity();        if (resultPrice < 10000) {            bindingResult.addError(new ObjectError("item", new String[]{"totalPriceMin"}, new Object[]{10000, resultPrice}, null));        }    }    // ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ    if (bindingResult.hasErrors()) {        return "validation/v2/addForm";    }    // ì„±ê³µ ë¡œì§    Item savedItem = itemRepository.save(item);    redirectAttributes.addAttribute("itemId", savedItem.getId());    redirectAttributes.addAttribute("status", true);    return "redirect:/validation/v2/items/{itemId}";}```</details>**ê²°ê³¼**![image](https://user-images.githubusercontent.com/83503188/210052760-4165ccc8-73da-4201-8f4a-75fd4ec947f6.png)<br/><br/><br/># ğŸ’¡ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬2**ëª©í‘œ**- `FieldError` , `ObjectError` ëŠ” ë‹¤ë£¨ê¸° ë„ˆë¬´ ë²ˆê±°ë¡­ë‹¤.- ì˜¤ë¥˜ ì½”ë“œë„ ì¢€ ë” ìë™í™” í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ? ì˜ˆ) `item.itemName `ì²˜ëŸ¼?ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ `BindingResult` ëŠ” ê²€ì¦í•´ì•¼ í•  ê°ì²´ì¸ target ë°”ë¡œ ë‹¤ìŒì— ì˜¨ë‹¤. ë”°ë¼ì„œ `BindingResult` ëŠ” ì´ë¯¸ ë³¸ì¸ì´ ê²€ì¦í•´ì•¼ í•  ê°ì²´ì¸ `target` ì„ ì•Œê³  ìˆë‹¤.```javalog.info("objectName={}", bindingResult.getObjectName());log.info("target={}", bindingResult.getTarget());```![image](https://user-images.githubusercontent.com/83503188/210053709-dba9d8ad-27f1-444b-a721-a4bf442f7746.png)<br/>## **âš¡ï¸`rejectValue() `, `reject()`**> `BindingResult` ê°€ ì œê³µí•˜ëŠ” `rejectValue()` , `reject()` ë¥¼ ì‚¬ìš©í•˜ë©´ `FieldError` , `ObjectError` ë¥¼ ì§ì ‘ ìƒì„±í•˜ì§€ ì•Šê³ , ê¹”ë”í•˜ê²Œ ê²€ì¦ ì˜¤ë¥˜ë¥¼ ë‹¤ë£° ìˆ˜ ìˆë‹¤.## **âš¡ï¸rejectValue()**```javavoid rejectValue(@Nullable String field, String errorCode, @Nullable Object[] errorArgs, @Nullable String defaultMessage);```- `field` : ì˜¤ë¥˜ í•„ë“œëª…- `errorCode` : ì˜¤ë¥˜ ì½”ë“œ(ì´ ì˜¤ë¥˜ ì½”ë“œëŠ” ë©”ì‹œì§€ì— ë“±ë¡ëœ ì½”ë“œê°€ ì•„ë‹ˆë‹¤. ë’¤ì—ì„œ ì„¤ëª…í•  `MessageCodesResolver` ë¥¼ ìœ„í•œ ì˜¤ë¥˜ ì½”ë“œì´ë‹¤.)- `errorArgs` : ì˜¤ë¥˜ ë©”ì‹œì§€ì—ì„œ `{0}` ì„ ì¹˜í™˜í•˜ê¸° ìœ„í•œ ê°’- `defaultMessage` : ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ ë©”ì‹œì§€```javabindingResult.rejectValue("price", "range", new Object[]{1000, 1000000}, null)```- ì•ì—ì„œ `BindingResult` ëŠ” ì–´ë–¤ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê²€ì¦í•˜ëŠ”ì§€ `target`ì„ ì´ë¯¸ ì•Œê³  ìˆë‹¤ê³  í–ˆë‹¤. ë”°ë¼ì„œ target(item)ì— ëŒ€í•œ ì •ë³´ëŠ” ì—†ì–´ë„ ëœë‹¤.- ì˜¤ë¥˜ í•„ë“œëª…ì€ ë™ì¼í•˜ê²Œ `price` ë¥¼ ì‚¬ìš©í–ˆë‹¤.**ì¶•ì•½ëœ ì˜¤ë¥˜ ì½”ë“œ**`FieldError()` ë¥¼ ì§ì ‘ ë‹¤ë£° ë•ŒëŠ” ì˜¤ë¥˜ ì½”ë“œë¥¼ `range.item.price` ì™€ ê°™ì´ ëª¨ë‘ ì…ë ¥í–ˆë‹¤.ê·¸ëŸ°ë°`rejectValue()` ë¥¼ ì‚¬ìš©í•˜ê³  ë¶€í„°ëŠ” ì˜¤ë¥˜ ì½”ë“œë¥¼ `range` ë¡œ ê°„ë‹¨í•˜ê²Œ ì…ë ¥í–ˆë‹¤. ì´ ë¶€ë¶„ì„ ì´í•´í•˜ë ¤ë©´ `MessageCodesResolver` ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤.<br/>## **âš¡ï¸reject()**```javavoid reject(String errorCode, @Nullable Object[] errorArgs, @Nullable String defaultMessage);```- ì•ì˜ ë‚´ìš©ê³¼ ê°™ë‹¤.<br/><details><summary>ValidationItemControllerV2 - addItemV4() ì¶”ê°€</summary>## **ValidationItemControllerV2 - addItemV4() ì¶”ê°€**```java@PostMapping("/add")public String addItemV4(@ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes) {    if (!StringUtils.hasText(item.getItemName())) {        bindingResult.rejectValue("itemName", "required"); // #required.item.itemName    }    if (item.getPrice() == null || item.getPrice() < 1000 || item.getPrice() > 1000000) {        bindingResult.rejectValue("price", "range", new Object[]{1000, 1000000}, null); // #range.item.price    }    if (item.getQuantity() == null || item.getQuantity() >= 9999) {        bindingResult.rejectValue("quantity", "max", new Object[]{9999}, null);    }    //íŠ¹ì • í•„ë“œê°€ ì•„ë‹Œ ë³µí•© ë£° ê²€ì¦    if (item.getPrice() != null && item.getQuantity() != null) {        int resultPrice = item.getPrice() * item.getQuantity();        if (resultPrice < 10000) {            bindingResult.reject("totalPriceMin", new Object[]{10000, resultPrice}, null);        }    }    // ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ    if (bindingResult.hasErrors()) {        return "validation/v2/addForm";    }    // ì„±ê³µ ë¡œì§    Item savedItem = itemRepository.save(item);    redirectAttributes.addAttribute("itemId", savedItem.getId());    redirectAttributes.addAttribute("status", true);    return "redirect:/validation/v2/items/{itemId}";}```</details><br/><br/><br/>## ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬3**ì˜¤ë¥˜ ì½”ë“œ ìƒì„± 2ê°€ì§€**```textrequired.item.itemName : ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ ì…ë‹ˆë‹¤.range.item.price : ìƒí’ˆì˜ ê°€ê²© ë²”ìœ„ ì˜¤ë¥˜ ì…ë‹ˆë‹¤.```- ìì„¸íˆ ìƒì„±```textrequired : í•„ìˆ˜ ê°’ ì…ë‹ˆë‹¤.range : ë²”ìœ„ ì˜¤ë¥˜ ì…ë‹ˆë‹¤.```- ë‹¨ìˆœí•˜ê²Œ ìƒì„±ë‹¨ìˆœí•˜ê²Œ ë§Œë“¤ë©´ ë²”ìš©ì„±ì´ ì¢‹ì•„ì„œ ì—¬ëŸ¬ê³³ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ë©”ì‹œì§€ë¥¼ ì„¸ë°€í•˜ê²Œ ì‘ì„±í•˜ê¸° ì–´ë µë‹¤.ë°˜ëŒ€ë¡œ ë„ˆë¬´ ìì„¸í•˜ê²Œ ë§Œë“¤ë©´ ë²”ìš©ì„±ì´ ë–¨ì–´ì§„ë‹¤.ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ë²”ìš©ì„±ìœ¼ë¡œ ì‚¬ìš©í•˜ë‹¤ê°€, ì„¸ë°€í•˜ê²Œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ” ì„¸ë°€í•œ ë‚´ìš©ì´ ì ìš©ë˜ë„ë¡ **ë©”ì‹œì§€ì— ë‹¨ê³„**ë¥¼ ë‘ëŠ” ë°©ë²•ì´ë‹¤.ì˜ˆë¥¼ ë“¤ì–´ì„œ `required` ë¼ê³  ì˜¤ë¥˜ ì½”ë“œë¥¼ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•´ë³´ì.ë‹¤ìŒê³¼ ê°™ì´ `required` ë¼ëŠ” ë©”ì‹œì§€ë§Œ ìˆìœ¼ë©´ ì´ ë©”ì‹œì§€ë¥¼ ì„ íƒí•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.```propertiesrequired: í•„ìˆ˜ ê°’ ì…ë‹ˆë‹¤.```ê·¸ëŸ°ë° ì˜¤ë¥˜ ë©”ì‹œì§€ì— `required.item.itemName` ì™€ ê°™ì´ ê°ì²´ëª…ê³¼ í•„ë“œëª…ì„ ì¡°í•©í•œ ì„¸ë°€í•œ ë©”ì‹œì§€ ì½”ë“œê°€ ìˆìœ¼ë©´ ì´ ë©”ì‹œì§€ë¥¼ ë†’ì€ ìš°ì„ ìˆœìœ„ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.```properties#Level1required.item.itemName: ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ ì…ë‹ˆë‹¤.#Level2required: í•„ìˆ˜ ê°’ ì…ë‹ˆë‹¤.```- `bindingResult.addError(new FieldError("item", "itemName", item.getItemName(), false, new String[]{"required.item.itemName", "required"}, null, null));`ìœ„ì™€ ê°™ì´ ì„¤ê³„í•¨ìœ¼ë¡œì¨ ê°œë°œ ì½”ë“œì˜ ë³€ê²½ì—†ì´ `messages.properties`ì˜ ìˆ˜ì •ìœ¼ë¡œ ì „ì²´ì ì¸ ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.ìŠ¤í”„ë§ì€ `MessageCodesResolver` ë¼ëŠ” ê²ƒìœ¼ë¡œ ì´ëŸ¬í•œ ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤.## ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬4`MessageCodesResolverTest````javapublic class MessageCodesResolverTest {    MessageCodesResolver codesResolver = new DefaultMessageCodesResolver();    @Test    void messageCodesResolverObject() {        String[] messageCodes = codesResolver.resolveMessageCodes("required", "item");        assertThat(messageCodes).containsExactly("required.item", "required");    }    @Test    @DisplayName("")    void messageCodeResolverField() {        String[] messageCodes = codesResolver.resolveMessageCodes("required", "item", "itemName", String.class);        assertThat(messageCodes).containsExactly("required.item.itemName", "required.itemName", "required.java.lang.String", "required");    }}```**MessageCodesResolver**- ê²€ì¦ ì˜¤ë¥˜ ì½”ë“œ("required", "item", ...)ë¡œ ë©”ì‹œì§€ ì½”ë“œ("required.item.itemName", "required.itemName", ...)ë“¤ì„ ìƒì„±í•œë‹¤.- `MessageCodesResolver` ì¸í„°í˜ì´ìŠ¤ì´ê³  `DefaultMessageCodesResolver` ëŠ” ê¸°ë³¸ êµ¬í˜„ì²´ì´ë‹¤.- ì£¼ë¡œ ë‹¤ìŒê³¼ í•¨ê»˜ ì‚¬ìš© `ObjectError` , `FieldError`### DefaultMessageCodesResolverì˜ ê¸°ë³¸ ë©”ì‹œì§€ ìƒì„± ê·œì¹™**ê°ì²´ ì˜¤ë¥˜**```textê°ì²´ ì˜¤ë¥˜ì˜ ê²½ìš° ë‹¤ìŒ ìˆœì„œë¡œ 2ê°€ì§€ ìƒì„±1.: code + "." + object name2.: codeì˜ˆ) ì˜¤ë¥˜ ì½”ë“œ: required, object name: item1.: required.item2.: required```**í•„ë“œ ì˜¤ë¥˜**```textí•„ë“œ ì˜¤ë¥˜ì˜ ê²½ìš° ë‹¤ìŒ ìˆœì„œë¡œ 4ê°€ì§€ ë©”ì‹œì§€ ì½”ë“œ ìƒì„±1.: code + "." + object name + "." + field2.: code + "." + field3.: code + "." + field type4.: codeì˜ˆ) ì˜¤ë¥˜ ì½”ë“œ: typeMismatch, object name "user", field "age", field type: int1. "typeMismatch.user.age"2. "typeMismatch.age"3. "typeMismatch.int"4. "typeMismatch"```**ë™ì‘ ë°©ì‹**1. BindingResult ì˜ rejectValue() ë¥¼ í˜¸ì¶œí•  ë•Œ ë‚´ë¶€ì ìœ¼ë¡œ MessageCodesResolver ë¥¼ í†µí•´ ë©”ì‹œì§€ ì½”ë“œë¥¼ ìƒì„±(MessageCodesResolver ëŠ” ê°€ì¥ ë””í…Œì¼í•œ ë©”ì‹œì§€ë¶€í„° ìƒì„±)2. ìƒì„±ëœ ë©”ì‹œì§€ ì½”ë“œë“¤ì„ í†µí•´ `FieldError` ë¥¼ ìƒì„± -> `new FieldError("item", "itemName", null, false, new String[]{"required.item.itemName",...}, null, null);`    - `FieldError` , `ObjectError` ì˜ ìƒì„±ìë¥¼ ë³´ë©´, ì˜¤ë¥˜ ì½”ë“œë¥¼ í•˜ë‚˜ê°€ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ì˜¤ë¥˜ ì½”ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. MessageCodesResolver ë¥¼ í†µí•´ì„œ ìƒì„±ëœ ìˆœì„œëŒ€ë¡œ ì˜¤ë¥˜ ì½”ë“œë¥¼ ë³´ê´€í•œë‹¤.![image](https://user-images.githubusercontent.com/83503188/210057940-f5436359-bf03-4b29-a14d-ed5826a3f572.png)**FieldError rejectValue("itemName", "required")**ë‹¤ìŒ 4ê°€ì§€ ì˜¤ë¥˜ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±- `required.item.itemName`- `required.itemName`- `required.java.lang.String`    - íƒ€ì…ì„ ê°€ì§€ê³  "ë¬¸ìë¥¼ ë°˜ë“œì‹œ ì…ë ¥í•´ì•¼í•©ë‹ˆë‹¤." ì™€ ê°™ì€ ê³µí†µ ë©”ì‹œì§€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.- `required`**ObjectError reject("totalPriceMin")**ë‹¤ìŒ 2ê°€ì§€ ì˜¤ë¥˜ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±- `totalPriceMin.item`- `totalPriceMin`## ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬5### ì˜¤ë¥˜ ì½”ë“œ ê´€ë¦¬ ì „ëµ`errors.properties````properties#==ObjectError==#Level1totalPriceMin.item=ìƒí’ˆì˜ ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ {0}ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = {1}#Level2 - ìƒëµtotalPriceMin=ì „ì²´ ê°€ê²©ì€ {0}ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = {1}#==FieldError==#Level1required.item.itemName=ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.range.item.price=ê°€ê²©ì€ {0} ~ {1} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.max.item.quantity=ìˆ˜ëŸ‰ì€ ìµœëŒ€ {0} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.#Level2 - ìƒëµ#Level3required.java.lang.String = í•„ìˆ˜ ë¬¸ìì…ë‹ˆë‹¤.required.java.lang.Integer = í•„ìˆ˜ ìˆ«ìì…ë‹ˆë‹¤.min.java.lang.String = {0} ì´ìƒì˜ ë¬¸ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.min.java.lang.Integer = {0} ì´ìƒì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.range.java.lang.String = {0} ~ {1} ê¹Œì§€ì˜ ë¬¸ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.range.java.lang.Integer = {0} ~ {1} ê¹Œì§€ì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.max.java.lang.String = {0} ê¹Œì§€ì˜ ë¬¸ìë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.max.java.lang.Integer = {0} ê¹Œì§€ì˜ ìˆ«ìë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.#Level4required = í•„ìˆ˜ ê°’ ì…ë‹ˆë‹¤.min= {0} ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.range= {0} ~ {1} ë²”ìœ„ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.max= {0} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.```- êµ¬ì²´ì ì¸ ê²ƒì„ ë¨¼ì € ë§Œë“¤ê³ , ëœ êµ¬ì²´ì ì¸ ê²ƒì„ ê°€ì¥ ë‚˜ì¤‘ì— ë§Œë“ ë‹¤.**Level1 ì ìš©**![image](https://user-images.githubusercontent.com/83503188/210058783-5c5bafd3-9e75-42a9-8cc5-37f9bb5db816.png)**Level1 ì£¼ì„ ì²˜ë¦¬**![image](https://user-images.githubusercontent.com/83503188/210058630-1b4b6562-6765-4bd9-ab87-41609374d8a2.png)**Level3 ì£¼ì„ ì²˜ë¦¬**![image](https://user-images.githubusercontent.com/83503188/210058706-6385a364-5e3e-4539-b753-8dd2eb7fc944.png)### ValidationUtils**ValidationUtils ì‚¬ìš© ì „**```javaif (!StringUtils.hasText(item.getItemName())) {bindingResult.rejectValue("itemName", "required", "ê¸°ë³¸: ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");}```**ValidationUtils ì‚¬ìš© í›„**```javaValidationUtils.rejectIfEmptyOrWhitespace(bindingResult, "itemName","required");```ì¡°ê±´ë¬¸ì—†ì´ ê°„ë‹¨í•˜ê²Œ ê°’ì´ ì—†ê±°ë‚˜ ê³µë°±ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” Util í´ë˜ìŠ¤**ì •ë¦¬**1. `rejectValue()` í˜¸ì¶œ2. `MessageCodesResolver` ë¥¼ ì‚¬ìš©í•´ì„œ ê²€ì¦ ì˜¤ë¥˜ ì½”ë“œë¡œ ë©”ì‹œì§€ ì½”ë“œë“¤ì„ ìƒì„±3. `new FieldError()` ë¥¼ ìƒì„±í•˜ë©´ì„œ ë©”ì‹œì§€ ì½”ë“œë“¤ì„ ë³´ê´€4. `th:errors` ì—ì„œ ë©”ì‹œì§€ ì½”ë“œë“¤ë¡œ ë©”ì‹œì§€ë¥¼ ìˆœì„œëŒ€ë¡œ ë©”ì‹œì§€ì—ì„œ ì°¾ê³ , ë…¸ì¶œ## ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬6### ìŠ¤í”„ë§ì´ ì§ì ‘ ë§Œë“  ì˜¤ë¥˜ ë©”ì‹œì§€ ì²˜ë¦¬![image](https://user-images.githubusercontent.com/83503188/210059517-272ae689-aee4-41b8-a33c-48f10869a7bf.png)ê²€ì¦ ì˜¤ë¥˜ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì´ 2ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.- ê°œë°œìê°€ ì§ì ‘ ì„¤ì •í•œ ì˜¤ë¥˜ ì½”ë“œ `rejectValue()` ë¥¼ ì§ì ‘ í˜¸ì¶œ- ìŠ¤í”„ë§ì´ ì§ì ‘ ê²€ì¦ ì˜¤ë¥˜ì— ì¶”ê°€í•œ ê²½ìš°(ì£¼ë¡œ íƒ€ì… ì •ë³´ê°€ ë§ì§€ ì•ŠìŒ)`price` í•„ë“œì— ë¬¸ìë¥¼ ì…ë ¥í•˜ëŠ” ê²½ìš°ì— ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë©´ `BindingResult` ì— `FieldError` ê°€ ë‹´ê²¨ìˆê³ , ë‹¤ìŒê³¼ ê°™ì€ ë©”ì‹œì§€ ì½”ë“œë“¤ì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.![image](https://user-images.githubusercontent.com/83503188/210059638-e3b73c63-2c00-4f7c-afd7-2576f5f4c23e.png)- `typeMismatch.item.price`- `typeMismatch.price`- `typeMismatch.java.lang.Integer`- `typeMismatch`ìŠ¤í”„ë§ì€ íƒ€ì… ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ `typeMismatch` ë¼ëŠ” ì˜¤ë¥˜ ì½”ë“œë¥¼ ì‚¬ìš©í•œë‹¤. ì´ ì˜¤ë¥˜ ì½”ë“œê°€ `MessageCodesResolver` ë¥¼ í†µí•˜ë©´ì„œ 4ê°€ì§€ ë©”ì‹œì§€ ì½”ë“œê°€ ìƒì„±ëœ ê²ƒì´ë‹¤.`error.properties` ì¶”ê°€```propertiestypeMismatch.java.lang.Integer=ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.typeMismatch=íƒ€ì… ì˜¤ë¥˜ì…ë‹ˆë‹¤.```**ê²°ê³¼**![image](https://user-images.githubusercontent.com/83503188/210059825-2176d4ef-e831-4faa-9ead-012fec04133b.png)## Validator ë¶„ë¦¬1**ëª©í‘œ**- ë³µì¡í•œ ê²€ì¦ ë¡œì§ì„ ë³„ë„ë¡œ ë¶„ë¦¬í•˜ì.ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ê²€ì¦ ë¡œì§ì´ ì°¨ì§€í•˜ëŠ” ë¶€ë¶„ì€ ë§¤ìš° í¬ë‹¤.ì´ëŸ° ê²½ìš° ë³„ë„ì˜ í´ë˜ìŠ¤ë¡œ ì—­í• ì„ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ê·¸ë¦¬ê³  ì´ë ‡ê²Œ ë¶„ë¦¬í•œ ê²€ì¦ ë¡œì§ì„ ì¬ì‚¬ìš© í•  ìˆ˜ë„ ìˆë‹¤.**ItemValidator**```java@Componentpublic class ItemValidator implements Validator {    @Override    public boolean supports(Class<?> clazz) {        return Item.class.isAssignableFrom(clazz);    }    @Override    public void validate(Object target, Errors errors) {        Item item = (Item) target;        if (!StringUtils.hasText(item.getItemName())) {            errors.rejectValue("itemName", "required"); // #required.item.itemName        }        if (item.getPrice() == null || item.getPrice() < 1000 || item.getPrice() > 1000000) {            errors.rejectValue("price", "range", new Object[]{1000, 1000000}, null); // #range.item.price        }        if (item.getQuantity() == null || item.getQuantity() >= 9999) {            errors.rejectValue("quantity", "max", new Object[]{9999}, null);        }        //íŠ¹ì • í•„ë“œê°€ ì•„ë‹Œ ë³µí•© ë£° ê²€ì¦        if (item.getPrice() != null && item.getQuantity() != null) {            int resultPrice = item.getPrice() * item.getQuantity();            if (resultPrice < 10000) {                errors.reject("totalPriceMin", new Object[]{10000, resultPrice}, null);            }        }    }}```ìŠ¤í”„ë§ì€ ê²€ì¦ì„ ì²´ê³„ì ìœ¼ë¡œ ì œê³µí•˜ê¸° ìœ„í•´ ë‹¤ìŒ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•œë‹¤.```javapublic interface Validator {    boolean supports(Class<?> clazz);    void validate(Object target, Errors errors);}```- `supports() {}` : í•´ë‹¹ ê²€ì¦ê¸°ë¥¼ ì§€ì›í•˜ëŠ” ì—¬ë¶€ í™•ì¸(ë’¤ì—ì„œ ì„¤ëª…)    - `Item.class.isAssignableFrom(clazz);`: isAssignableFrom ì„ í†µí•´ì„œ ìì‹ í´ë˜ìŠ¤ë„ í—ˆìš©- `validate(Object target, Errors errors)` : ê²€ì¦ ëŒ€ìƒ ê°ì²´ì™€ BindingResult### ItemValidator ì§ì ‘ í˜¸ì¶œí•˜ê¸°**ValidationItemControllerV2 - addItemV5()**```java    private final ItemValidator itemValidator;        ...     @PostMapping("/add")    public String addItemV5(@ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes) {        itemValidator.validate(item, bindingResult);        // ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ        if (bindingResult.hasErrors()) {            log.info("errors={}", bindingResult);            return "validation/v2/addForm";        }        // ì„±ê³µ ë¡œì§        Item savedItem = itemRepository.save(item);        redirectAttributes.addAttribute("itemId", savedItem.getId());        redirectAttributes.addAttribute("status", true);        return "redirect:/validation/v2/items/{itemId}";    }```## Validator ë¶„ë¦¬2ìŠ¤í”„ë§ì´ `Validator` ì¸í„°í˜ì´ìŠ¤ë¥¼ ë³„ë„ë¡œ ì œê³µí•˜ëŠ” ì´ìœ ëŠ” ì²´ê³„ì ìœ¼ë¡œ ê²€ì¦ ê¸°ëŠ¥ì„ ë„ì…í•˜ê¸° ìœ„í•´ì„œë‹¤.`Validator` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ ê²€ì¦ê¸°ë¥¼ ë§Œë“¤ë©´ ìŠ¤í”„ë§ì˜ ì¶”ê°€ì ì¸ ë„ì›€ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.### WebDataBinderë¥¼ í†µí•´ì„œ ì‚¬ìš©í•˜ê¸°`WebDataBinder` ëŠ” ìŠ¤í”„ë§ì˜ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ì˜ ì—­í• ì„ í•´ì£¼ê³  ê²€ì¦ ê¸°ëŠ¥ë„ ë‚´ë¶€ì— í¬í•¨í•œë‹¤.**ValidationItemControllerV2**```java    @InitBinder    public void init(WebDataBinder dataBinder) {        log.info("init binder={}", dataBinder);        dataBinder.addValidators(itemValidator);    }```- ì´ë ‡ê²Œ `WebDataBinder` ì— ê²€ì¦ê¸°ë¥¼ ì¶”ê°€í•˜ë©´ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” ê²€ì¦ê¸°ë¥¼ ìë™ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆë‹¤.- `@InitBinder` -> í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì—ë§Œ ì˜í–¥ì„ ì¤€ë‹¤. ê¸€ë¡œë²Œ ì„¤ì •ì€ ë³„ë„ë¡œ í•´ì•¼í•œë‹¤.### @Validated ì ìš©**ValidationItemControllerV2 - addItemV6()**```java@PostMapping("/add")public String addItemV6(@Validated @ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes) {        // ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ        if (bindingResult.hasErrors()) {            log.info("errors={}", bindingResult);            return "validation/v2/addForm";        }        // ì„±ê³µ ë¡œì§        Item savedItem = itemRepository.save(item);        redirectAttributes.addAttribute("itemId", savedItem.getId());        redirectAttributes.addAttribute("status", true);        return "redirect:/validation/v2/items/{itemId}";}```- validator ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” ë¶€ë¶„ì´ ì‚¬ë¼ì§€ê³ , ëŒ€ì‹ ì— ê²€ì¦ ëŒ€ìƒ ì•ì— `@Validated` ê°€ ë¶™ì—ˆë‹¤.**ë™ì‘ ë°©ì‹**`@Validated` ëŠ” ê²€ì¦ê¸°ë¥¼ ì‹¤í–‰í•˜ë¼ëŠ” ì• ë…¸í…Œì´ì…˜ì´ë‹¤.ì´ ì• ë…¸í…Œì´ì…˜ì´ ë¶™ìœ¼ë©´ ì•ì„œ `WebDataBinder` ì— ë“±ë¡í•œ ê²€ì¦ê¸°ë¥¼ ì°¾ì•„ì„œ ì‹¤í–‰í•œë‹¤.ê·¸ëŸ°ë° ì—¬ëŸ¬ ê²€ì¦ê¸°ë¥¼ ë“±ë¡í•œë‹¤ë©´ ê·¸ ì¤‘ì— ì–´ë–¤ ê²€ì¦ê¸°ê°€ ì‹¤í–‰ë˜ì–´ì•¼ í• ì§€ êµ¬ë¶„ì´ í•„ìš”í•˜ë‹¤. ì´ë•Œ `supports()` ê°€ ì‚¬ìš©ëœë‹¤.ì—¬ê¸°ì„œëŠ” `supports(Item.class)` í˜¸ì¶œë˜ê³ , ê²°ê³¼ê°€ `true` ì´ë¯€ë¡œ `ItemValidator` ì˜ `validate()` ê°€ í˜¸ì¶œëœë‹¤.### ê¸€ë¡œë²Œ ì„¤ì • - ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì— ë‹¤ ì ìš©```java@SpringBootApplicationpublic class ItemServiceApplication implements WebMvcConfigurer {    public static void main(String[] args) {        SpringApplication.run(ItemServiceApplication.class, args);    }    @Override    public Validator getValidator() {        return new ItemValidator();    }}```- webDataBinder ê°€ ì‚¬ìš©ìì˜ ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œ ìƒì„±ë˜ëŠ”ë° Global ì„¤ì •ì´ ë˜ì–´ìˆìœ¼ë©´ ì•Œì•„ì„œ ì‚½ì…- Global ì„¤ì •ì´ ì—†ìœ¼ë©´ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì— `@InitBinder` ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°ì—ë§Œ ì‚½ì…- í•˜ì§€ë§Œ Global ì„¤ì •í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤.ê¸°ì¡´ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ `@InitBinder` ë¥¼ ì œê±°í•´ë„ ê¸€ë¡œë²Œ ì„¤ì •ìœ¼ë¡œ ì •ìƒ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.> ì°¸ê³ >> ê²€ì¦ì‹œ `@Validated` `@Valid` ë‘˜ë‹¤ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.>> `javax.validation.@Valid` ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ build.gradle ì˜ì¡´ê´€ê³„ ì¶”ê°€ê°€ í•„ìš”í•˜ë‹¤.> `implementation 'org.springframework.boot:spring-boot-starter-validation'`>> `@Validated` ëŠ” ìŠ¤í”„ë§ ì „ìš© ê²€ì¦ ì• ë…¸í…Œì´ì…˜ì´ê³ , `@Valid` ëŠ” ìë°” í‘œì¤€ ê²€ì¦ ì• ë…¸í…Œì´ì…˜ì´ë‹¤.